{"version":3,"sources":["node_modules/browser-pack/_prelude.js","public/js/app.js","public/js/helpers/ajax.js","public/js/helpers/ajaxspiner.js","public/js/helpers/util.js","public/js/modules/header.js","public/js/modules/search.js","public/js/pages/home.page.js","public/js/pages/searchresult.page.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar header = require('./modules/header'),    \n    util = require('./helpers/util');\n\nvar pages = {\n    homepage: require('./pages/home.page'),\n    searchresultpage: require('./pages/searchresult.page')\n}\n\nfunction loadJavascriptForPage() {\n    if(typeof window.pageContext === 'undefined' || typeof window.pageContext.pageName === 'undefined') {\n        return;\n    }\n\n    if(typeof pages[window.pageContext.pageName] !== 'undefined') {\n        pages[window.pageContext.pageName].init();\n    }    \n}\n\nvar app = {\n    init: function() {    \n        header.init();\n        loadJavascriptForPage()\n    }\n};\n\n$(function() {\n    app.init();    \n});","'use strict';\n\nvar ajaxspiner = require('./ajaxspiner'),\n    util = require('./util'),\n    ajax = {};\n\n// function addAccessTokenToAjaxHeader(self, xhr) {\n//     if (window.user.userId !== 0) {\n//         if (typeof window.expat.access_token === 'undefined') {\n//             self.getAccessToken();\n//             if (typeof window.expat.access_token === 'undefined') {\n//                 xhr.abort();\n//             } else {\n//                 xhr.setRequestHeader(\"Authorization\", \"Bearer \" + window.expat.access_token);\n//             }\n//         } else {\n//             xhr.setRequestHeader(\"Authorization\", \"Bearer \" + window.expat.access_token);\n//         }\n//     }\n// }\n\najax.get = function (url, options) {    \n    var deferred = $.Deferred();\n    var ajaxSpinnerInstance;\n    var opts = $.extend({}, options);    \n\n    $.ajax({\n        method: 'GET',\n        url: url,\n        contentType: 'application/json',\n        beforeSend: function (xhr) {\n            // if (opts.isDisplaySpinner !== false) {\n            //     ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n            //     ajaxSpinnerInstance.startSpinner();\n            // }\n\n            //addAccessTokenToAjaxHeader(self, xhr);\n        },\n        success: function (data) {\n            deferred.resolve(data);\n        },\n        error: function (error) {            \n            deferred.reject(error);\n        },\n        complete: function () {\n            // if (opts.isDisplaySpinner !== true) {\n            //     ajaxSpinnerInstance.stopSpinner();\n            // }\n        }\n    });\n\n    return deferred.promise();\n};\n\n// ajax.delete = function (url, options) {    \n//     var deferred = $.Deferred();\n//     var ajaxSpinnerInstance;\n//     var opts = $.extend({}, options);\n    \n//     $.ajax({\n//         method: 'DELETE',\n//         url: url,\n//         contentType: 'application/json',\n//         beforeSend: function (xhr) {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n//                 ajaxSpinnerInstance.startSpinner();\n//             }\n\n//             if (url.indexOf('/api/') !== -1) {\n//                 addAccessTokenToAjaxHeader(self, xhr);\n//             }\n//         },\n//         success: function (data) {\n//             deferred.resolve(data);\n//         },\n//         error: function (error) {\n//             window.expat.access_token = undefined;\n//             deferred.reject(error);\n//         },\n//         complete: function () {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance.stopSpinner();\n//             }\n//         }\n//     });\n\n//     return deferred.promise();\n// };\n\n// /*\n//  * - url : api url\n//  * - options\n//  *  + spinnerSize : spinner size (small, medium, large), default is large\n//  *  + spinnerContainer : container to append spinner and overlay, default is body\n//  *  + spinnerContainer : By default, spinner is showed. Set value to false to hide spinner\n//  *  + isSpinnerLoadingText : used to add \"Loading ...\" text under spinner icon\n//  *  + isOverlayDiv : for display overlay div, default is true\n//  * - postData : api post data\n//  */\n// BaseClass.prototype.sendPost = function (url, options, postData) {\n//     var self = this;\n//     var deferred = $.Deferred();\n//     var ajaxSpinnerInstance;\n//     var opts = $.extend({}, options);\n//     postData = $.extend({ LoginUserId: expat.user.userId }, postData);\n\n//     var contentType = typeof opts.contentType !== 'undefined' ? opts.contentType : 'application/x-www-form-urlencoded; charset=UTF-8';\n//     if (opts.isStringify) {\n//         postData = JSON.stringify(postData);\n//     }\n\n//     if (url.indexOf('/api/') !== -1) {\n//         contentType = 'application/json';\n//         postData = JSON.stringify(postData);\n//     }\n//     var ajaxOptions = {\n//         method: 'POST',\n//         url: url,\n//         data: postData,\n//         contentType: contentType,\n//         //dataType: 'json',\n//         beforeSend: function (xhr) {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n//                 ajaxSpinnerInstance.startSpinner();\n//             }\n\n//             if (url.indexOf('/api/') !== -1) {\n//                 addAccessTokenToAjaxHeader(self, xhr);\n//             }\n//         },\n//         success: function (data) {\n//             deferred.resolve(data);\n//         },\n//         error: function (error) {\n//             window.expat.access_token = undefined;\n//             deferred.reject(error);\n//         },\n//         complete: function () {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance.stopSpinner();\n//             }\n//         }\n//     };\n\n//     $.ajax(ajaxOptions);\n\n//     return deferred.promise();\n// };\n\n// /*\n//  * - url : jquery template url\n//  * - tmplId : template id\n//  * - tmplData : data to bind into template\n//  */\n// BaseClass.prototype.generateTmpl = function (url, tmplId, tmplData) {\n//     var baseClass = this;\n//     var deferred = $.Deferred();\n\n//     var $tmplId = $(tmplId);\n//     if ($tmplId.length) {\n//         deferred.resolve(bindTmpl($tmplId, tmplData));\n//     }\n//     else {\n//         baseClass.sendGet(url, { isDisplaySpinner: false }).done(function (template) {\n//             $('body').append(template);\n//             deferred.resolve(bindTmpl($(tmplId), tmplData));\n//         }).fail(function (error) {\n//             deferred.reject(error);\n//         });\n//     }\n\n//     return deferred;\n// };\n\n// //========================================\n// // Private functions\n\n// function bindTmpl($tmplId, tmplData) {\n//     $.template($tmplId.attr('id'), $tmplId);\n//     if (typeof tmplData !== 'undefined') {\n//         return $.tmpl($tmplId.attr('id'), tmplData);\n//     }\n//     return $.tmpl($tmplId.attr('id'));\n// }\n\n\nmodule.exports = ajax;","'use strict';\n\nvar ajaxspiner = {},\n    spinner,\n    spinnerContainer,\n    defaultOpts = {\n        lines: 11, // The number of lines to draw\n        length: 15, // The length of each line\n        width: 6, // The line thickness\n        radius: 15, // The radius of the inner circle\n        scale: 1, // Scales overall size of the spinner\n        corners: 0.8, // Corner roundness (0..1)\n        color: '#00C3FF', // #rgb or #rrggbb or array of colors\n        opacity: 0.15, // Opacity of the lines\n        rotate: 0, // The rotation offset\n        direction: 1, // 1: clockwise, -1: counterclockwise\n        speed: 1, // Rounds per second\n        trail: 60, // Afterglow percentage\n        fps: 20, // Frames per second when using setTimeout() as a fallback for CSS\n        zIndex: 2e9, // The z-index (defaults to 2000000000)\n        className: 'spinner', // The CSS class to assign to the spinner\n        top: '50%', // Top position relative to parent\n        left: '50%', // Left position relative to parent\n        shadow: false, // Whether to render a shadow\n        hwaccel: false, // Whether to use hardware acceleration\n        position: 'absolute' // Element positioning\n    };\n\najaxspiner.start = function (options) {\n    options = options || {};\n    spinnerContainer = options.spinnerContainer || 'body';\n    var spinnerSize = options.spinnerSize || 'large',\n        isSpinnerLoadingText = options.isSpinnerLoadingText || false,\n        isOverlayDiv = typeof options.isOverlayDiv !== 'undefined' ? options.isOverlayDiv : true,\n        opts;\n\n    switch (spinnerSize) {\n        case 'small':\n            opts = $.extend(defaultOpts, { lines: 11, length: 8, width: 3, radius: 6 });\n            break;\n        case 'medium':\n            opts = $.extend(defaultOpts, { lines: 11, length: 10, width: 5, radius: 11 });\n            break;\n        default: //large size for page\n            opts = defaultOpts;\n            break;\n    }\n    //var baseClass = this;\n    var target = document.querySelector(spinnerContainer);\n\n    //check and add \"position: relative\" for spinner container\n    if (target.style.position !== 'absolute' || target.style.position !== 'relative') {\n        target.style.position = 'relative';\n    }\n\n    //add ajax overlay div\n    if (isOverlayDiv !== false) {\n        var overlayDiv = document.createElement('div');\n        overlayDiv.classList.add('ajax-overlay');\n        target.appendChild(overlayDiv);\n    }\n\n    spinner = new Spinner(opts).spin(target);\n    if (typeof isSpinnerLoadingText !== 'undefined' && isSpinnerLoadingText === true) {\n        var spinnerLoadingTextDiv = document.createElement('div');\n        var textNote = document.createTextNode('Loading more ...');\n        spinnerLoadingTextDiv.appendChild(textNote);\n        spinnerLoadingTextDiv.classList.add('spinnerLoadingText');        \n        spinnerLoadingTextDiv.classList.add(spinnerSize);\n        spinner.el.appendChild(spinnerLoadingTextDiv);\n    }\n};\n\najaxspiner.stop = function () {\n    spinner.stop();\n    $(spinnerContainer).find('.ajax-overlay').remove();\n};\n\nmodule.exports = ajaxspiner;","'use strict';\n\nvar ajaxspiner = require('./ajaxspiner');\n\nfunction isAuthenticated() {\n    if(typeof userId !== 'undefined' && userId !== '')\n        return true;\n    return false;\n}\n\nfunction openAjaxPopup(url, popupSelector) {    \n    $.magnificPopup.open({\n        items: {\n            src: popupSelector\n        },\n        callbacks: {\n            beforeOpen: function() {\n                ajaxspiner.start({\n                    spinnerContainer: popupSelector\n                });\n            }\n        }\n    });\n}\n\nvar util = {\n    isAuthenticated: isAuthenticated,\n    openAjaxPopup: openAjaxPopup\n};\n\nmodule.exports = util;","'use strict';\n\nvar search = require('./search');\n\nfunction toggleMenu() {\n    $('.toggle-menu').on('click', function (e) {\n        e.preventDefault();\n        $('body').toggleClass('mobile-menu');\n    })\n}\n\nfunction init() {\n    toggleMenu();\n    search.init();\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nfunction bindAutoComplete(data) {\n    var $searchSuggestion = $('#search-suggestion');    \n    $searchSuggestion.empty(); \n\n    if(data == null) {\n        return;\n    }\n\n    var len = data.suggestions.length;\n    var result = '<ul>';    \n    $.each(data.suggestions, function(index, item) {        \n        result += '<li><a href=\"/search?word=' + item.select + '&type=vi\">' + $(item.data).html() + '</a></li>';\n    });\n    $searchSuggestion.append(result + '</ul>');\n}\n\nfunction searchAutocomplete() {\n    $(\"#word\").on('input', function() {\n        var $self = $(this);\n        var word = $self.val().trim();\n        if(word === '') {\n            bindAutoComplete(null);\n            return;\n        } \n\n        $.ajax({\n            url: \"/api/vidict/autocomplete/\" + $(this).val().trim(),              \n            method: \"GET\",\n            dataType: \"json\",\n            success: function (data) {      \n                bindAutoComplete(data);\n            }\n        });     \n    });    \n}\n\nfunction init() {\n    searchAutocomplete();\n}\n\nmodule.exports = {\n    init: init\n};\n","'use strict';\n\nfunction init() {\n    console.log('Home Page');\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nvar util = require('../helpers/util'),\n    ajax = require('../helpers/ajax');\n\nfunction openAddWordPopup() {\n    $('#addToList').on('click', function(e) {\n        e.preventDefault();\n        if(!util.isAuthenticated()) {\n            $.magnificPopup.open({\n                items: {\n                    src: '.authen-popup'                    \n                }\n            });\n            return;\n        } else {\n            $.magnificPopup.open({\n                items: {\n                    src: '.add-to-list-popup'\n                },\n                callbacks: {\n                    beforeOpen: function() {\n                        var options = '';\n                        ajax.get('/api/lists').done(function(lists) {\n                            $.each(lists, function(index, list) {\n                                options += '<option value=\"' + list._id + '\">' + list.title + '</option>';\n                            });\n                            $('.add-to-list-popup #list').empty();\n                            $('.add-to-list-popup #list').append(options);\n                        }).fail(function(err) {\n                            console.log(err);\n                        });\n                    }\n                }\n            });\n        }\n    });\n}\n\nfunction addWordToList() {\n    var $addToListPopup = $('#add-to-list-popup');\n    $addToListPopup.on('click', 'button', function(e) {\n        e.preventDefault();\n        var data = {\n            word: $addToListPopup.find('.hero-title').text(),\n            translateToEn: '',\n            translateToVi: document.getElementById('content_selectable').outerHTML,\n            listId: $addToListPopup.find('#list').val()\n        }\n\n        console.log(data);\n\n        $.ajax({\n            url: '/api/words',\n            method: 'POST',\n            data: data,\n            success: function(result) {\n                console.log(result);\n            },\n            error: function(err) {\n                console.log(err);\n            }\n        })\n    })\n}\n\nfunction init() {\n    openAddWordPopup();\n    addWordToList();\n}\n\nmodule.exports = {\n    init: init\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvanMvYXBwLmpzIiwicHVibGljL2pzL2hlbHBlcnMvYWpheC5qcyIsInB1YmxpYy9qcy9oZWxwZXJzL2FqYXhzcGluZXIuanMiLCJwdWJsaWMvanMvaGVscGVycy91dGlsLmpzIiwicHVibGljL2pzL21vZHVsZXMvaGVhZGVyLmpzIiwicHVibGljL2pzL21vZHVsZXMvc2VhcmNoLmpzIiwicHVibGljL2pzL3BhZ2VzL2hvbWUucGFnZS5qcyIsInB1YmxpYy9qcy9wYWdlcy9zZWFyY2hyZXN1bHQucGFnZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGVhZGVyID0gcmVxdWlyZSgnLi9tb2R1bGVzL2hlYWRlcicpLCAgICBcbiAgICB1dGlsID0gcmVxdWlyZSgnLi9oZWxwZXJzL3V0aWwnKTtcblxudmFyIHBhZ2VzID0ge1xuICAgIGhvbWVwYWdlOiByZXF1aXJlKCcuL3BhZ2VzL2hvbWUucGFnZScpLFxuICAgIHNlYXJjaHJlc3VsdHBhZ2U6IHJlcXVpcmUoJy4vcGFnZXMvc2VhcmNocmVzdWx0LnBhZ2UnKVxufVxuXG5mdW5jdGlvbiBsb2FkSmF2YXNjcmlwdEZvclBhZ2UoKSB7XG4gICAgaWYodHlwZW9mIHdpbmRvdy5wYWdlQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdy5wYWdlQ29udGV4dC5wYWdlTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmKHR5cGVvZiBwYWdlc1t3aW5kb3cucGFnZUNvbnRleHQucGFnZU5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwYWdlc1t3aW5kb3cucGFnZUNvbnRleHQucGFnZU5hbWVdLmluaXQoKTtcbiAgICB9ICAgIFxufVxuXG52YXIgYXBwID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkgeyAgICBcbiAgICAgICAgaGVhZGVyLmluaXQoKTtcbiAgICAgICAgbG9hZEphdmFzY3JpcHRGb3JQYWdlKClcbiAgICB9XG59O1xuXG4kKGZ1bmN0aW9uKCkge1xuICAgIGFwcC5pbml0KCk7ICAgIFxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWpheHNwaW5lciA9IHJlcXVpcmUoJy4vYWpheHNwaW5lcicpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcbiAgICBhamF4ID0ge307XG5cbi8vIGZ1bmN0aW9uIGFkZEFjY2Vzc1Rva2VuVG9BamF4SGVhZGVyKHNlbGYsIHhocikge1xuLy8gICAgIGlmICh3aW5kb3cudXNlci51c2VySWQgIT09IDApIHtcbi8vICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuZXhwYXQuYWNjZXNzX3Rva2VuID09PSAndW5kZWZpbmVkJykge1xuLy8gICAgICAgICAgICAgc2VsZi5nZXRBY2Nlc3NUb2tlbigpO1xuLy8gICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuZXhwYXQuYWNjZXNzX3Rva2VuID09PSAndW5kZWZpbmVkJykge1xuLy8gICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuLy8gICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB3aW5kb3cuZXhwYXQuYWNjZXNzX3Rva2VuKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4pO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gfVxuXG5hamF4LmdldCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHsgICAgXG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBhamF4U3Bpbm5lckluc3RhbmNlO1xuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIG9wdGlvbnMpOyAgICBcblxuICAgICQuYWpheCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAvLyBpZiAob3B0cy5pc0Rpc3BsYXlTcGlubmVyICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8gICAgIGFqYXhTcGlubmVySW5zdGFuY2UgPSBuZXcgQWpheFNwaW5uZXIob3B0cy5zcGlubmVyU2l6ZSwgb3B0cy5zcGlubmVyQ29udGFpbmVyLCBvcHRzLmlzU3Bpbm5lckxvYWRpbmdUZXh0LCBvcHRzLmlzT3ZlcmxheURpdik7XG4gICAgICAgICAgICAvLyAgICAgYWpheFNwaW5uZXJJbnN0YW5jZS5zdGFydFNwaW5uZXIoKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgLy9hZGRBY2Nlc3NUb2tlblRvQWpheEhlYWRlcihzZWxmLCB4aHIpO1xuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGlmIChvcHRzLmlzRGlzcGxheVNwaW5uZXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgIC8vICAgICBhamF4U3Bpbm5lckluc3RhbmNlLnN0b3BTcGlubmVyKCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG59O1xuXG4vLyBhamF4LmRlbGV0ZSA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHsgICAgXG4vLyAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuLy8gICAgIHZhciBhamF4U3Bpbm5lckluc3RhbmNlO1xuLy8gICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xuICAgIFxuLy8gICAgICQuYWpheCh7XG4vLyAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4vLyAgICAgICAgIHVybDogdXJsLFxuLy8gICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuLy8gICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4vLyAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gJ3VuZGVmaW5lZCcgfHwgb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSB0cnVlKSB7XG4vLyAgICAgICAgICAgICAgICAgYWpheFNwaW5uZXJJbnN0YW5jZSA9IG5ldyBBamF4U3Bpbm5lcihvcHRzLnNwaW5uZXJTaXplLCBvcHRzLnNwaW5uZXJDb250YWluZXIsIG9wdHMuaXNTcGlubmVyTG9hZGluZ1RleHQsIG9wdHMuaXNPdmVybGF5RGl2KTtcbi8vICAgICAgICAgICAgICAgICBhamF4U3Bpbm5lckluc3RhbmNlLnN0YXJ0U3Bpbm5lcigpO1xuLy8gICAgICAgICAgICAgfVxuXG4vLyAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJy9hcGkvJykgIT09IC0xKSB7XG4vLyAgICAgICAgICAgICAgICAgYWRkQWNjZXNzVG9rZW5Ub0FqYXhIZWFkZXIoc2VsZiwgeGhyKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbi8vICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbi8vICAgICAgICAgICAgIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4gPSB1bmRlZmluZWQ7XG4vLyAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuLy8gICAgICAgICB9LFxuLy8gICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLmlzRGlzcGxheVNwaW5uZXIgPT09ICd1bmRlZmluZWQnIHx8IG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gdHJ1ZSkge1xuLy8gICAgICAgICAgICAgICAgIGFqYXhTcGlubmVySW5zdGFuY2Uuc3RvcFNwaW5uZXIoKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuXG4vLyAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbi8vIH07XG5cbi8vIC8qXG4vLyAgKiAtIHVybCA6IGFwaSB1cmxcbi8vICAqIC0gb3B0aW9uc1xuLy8gICogICsgc3Bpbm5lclNpemUgOiBzcGlubmVyIHNpemUgKHNtYWxsLCBtZWRpdW0sIGxhcmdlKSwgZGVmYXVsdCBpcyBsYXJnZVxuLy8gICogICsgc3Bpbm5lckNvbnRhaW5lciA6IGNvbnRhaW5lciB0byBhcHBlbmQgc3Bpbm5lciBhbmQgb3ZlcmxheSwgZGVmYXVsdCBpcyBib2R5XG4vLyAgKiAgKyBzcGlubmVyQ29udGFpbmVyIDogQnkgZGVmYXVsdCwgc3Bpbm5lciBpcyBzaG93ZWQuIFNldCB2YWx1ZSB0byBmYWxzZSB0byBoaWRlIHNwaW5uZXJcbi8vICAqICArIGlzU3Bpbm5lckxvYWRpbmdUZXh0IDogdXNlZCB0byBhZGQgXCJMb2FkaW5nIC4uLlwiIHRleHQgdW5kZXIgc3Bpbm5lciBpY29uXG4vLyAgKiAgKyBpc092ZXJsYXlEaXYgOiBmb3IgZGlzcGxheSBvdmVybGF5IGRpdiwgZGVmYXVsdCBpcyB0cnVlXG4vLyAgKiAtIHBvc3REYXRhIDogYXBpIHBvc3QgZGF0YVxuLy8gICovXG4vLyBCYXNlQ2xhc3MucHJvdG90eXBlLnNlbmRQb3N0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucywgcG9zdERhdGEpIHtcbi8vICAgICB2YXIgc2VsZiA9IHRoaXM7XG4vLyAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuLy8gICAgIHZhciBhamF4U3Bpbm5lckluc3RhbmNlO1xuLy8gICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xuLy8gICAgIHBvc3REYXRhID0gJC5leHRlbmQoeyBMb2dpblVzZXJJZDogZXhwYXQudXNlci51c2VySWQgfSwgcG9zdERhdGEpO1xuXG4vLyAgICAgdmFyIGNvbnRlbnRUeXBlID0gdHlwZW9mIG9wdHMuY29udGVudFR5cGUgIT09ICd1bmRlZmluZWQnID8gb3B0cy5jb250ZW50VHlwZSA6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnO1xuLy8gICAgIGlmIChvcHRzLmlzU3RyaW5naWZ5KSB7XG4vLyAgICAgICAgIHBvc3REYXRhID0gSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpO1xuLy8gICAgIH1cblxuLy8gICAgIGlmICh1cmwuaW5kZXhPZignL2FwaS8nKSAhPT0gLTEpIHtcbi8vICAgICAgICAgY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XG4vLyAgICAgICAgIHBvc3REYXRhID0gSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpO1xuLy8gICAgIH1cbi8vICAgICB2YXIgYWpheE9wdGlvbnMgPSB7XG4vLyAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuLy8gICAgICAgICB1cmw6IHVybCxcbi8vICAgICAgICAgZGF0YTogcG9zdERhdGEsXG4vLyAgICAgICAgIGNvbnRlbnRUeXBlOiBjb250ZW50VHlwZSxcbi8vICAgICAgICAgLy9kYXRhVHlwZTogJ2pzb24nLFxuLy8gICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4vLyAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gJ3VuZGVmaW5lZCcgfHwgb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSB0cnVlKSB7XG4vLyAgICAgICAgICAgICAgICAgYWpheFNwaW5uZXJJbnN0YW5jZSA9IG5ldyBBamF4U3Bpbm5lcihvcHRzLnNwaW5uZXJTaXplLCBvcHRzLnNwaW5uZXJDb250YWluZXIsIG9wdHMuaXNTcGlubmVyTG9hZGluZ1RleHQsIG9wdHMuaXNPdmVybGF5RGl2KTtcbi8vICAgICAgICAgICAgICAgICBhamF4U3Bpbm5lckluc3RhbmNlLnN0YXJ0U3Bpbm5lcigpO1xuLy8gICAgICAgICAgICAgfVxuXG4vLyAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJy9hcGkvJykgIT09IC0xKSB7XG4vLyAgICAgICAgICAgICAgICAgYWRkQWNjZXNzVG9rZW5Ub0FqYXhIZWFkZXIoc2VsZiwgeGhyKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbi8vICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbi8vICAgICAgICAgICAgIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4gPSB1bmRlZmluZWQ7XG4vLyAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuLy8gICAgICAgICB9LFxuLy8gICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLmlzRGlzcGxheVNwaW5uZXIgPT09ICd1bmRlZmluZWQnIHx8IG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gdHJ1ZSkge1xuLy8gICAgICAgICAgICAgICAgIGFqYXhTcGlubmVySW5zdGFuY2Uuc3RvcFNwaW5uZXIoKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgIH07XG5cbi8vICAgICAkLmFqYXgoYWpheE9wdGlvbnMpO1xuXG4vLyAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbi8vIH07XG5cbi8vIC8qXG4vLyAgKiAtIHVybCA6IGpxdWVyeSB0ZW1wbGF0ZSB1cmxcbi8vICAqIC0gdG1wbElkIDogdGVtcGxhdGUgaWRcbi8vICAqIC0gdG1wbERhdGEgOiBkYXRhIHRvIGJpbmQgaW50byB0ZW1wbGF0ZVxuLy8gICovXG4vLyBCYXNlQ2xhc3MucHJvdG90eXBlLmdlbmVyYXRlVG1wbCA9IGZ1bmN0aW9uICh1cmwsIHRtcGxJZCwgdG1wbERhdGEpIHtcbi8vICAgICB2YXIgYmFzZUNsYXNzID0gdGhpcztcbi8vICAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG5cbi8vICAgICB2YXIgJHRtcGxJZCA9ICQodG1wbElkKTtcbi8vICAgICBpZiAoJHRtcGxJZC5sZW5ndGgpIHtcbi8vICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShiaW5kVG1wbCgkdG1wbElkLCB0bXBsRGF0YSkpO1xuLy8gICAgIH1cbi8vICAgICBlbHNlIHtcbi8vICAgICAgICAgYmFzZUNsYXNzLnNlbmRHZXQodXJsLCB7IGlzRGlzcGxheVNwaW5uZXI6IGZhbHNlIH0pLmRvbmUoZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4vLyAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRlbXBsYXRlKTtcbi8vICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYmluZFRtcGwoJCh0bXBsSWQpLCB0bXBsRGF0YSkpO1xuLy8gICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChlcnJvcikge1xuLy8gICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuXG4vLyAgICAgcmV0dXJuIGRlZmVycmVkO1xuLy8gfTtcblxuLy8gLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAvLyBQcml2YXRlIGZ1bmN0aW9uc1xuXG4vLyBmdW5jdGlvbiBiaW5kVG1wbCgkdG1wbElkLCB0bXBsRGF0YSkge1xuLy8gICAgICQudGVtcGxhdGUoJHRtcGxJZC5hdHRyKCdpZCcpLCAkdG1wbElkKTtcbi8vICAgICBpZiAodHlwZW9mIHRtcGxEYXRhICE9PSAndW5kZWZpbmVkJykge1xuLy8gICAgICAgICByZXR1cm4gJC50bXBsKCR0bXBsSWQuYXR0cignaWQnKSwgdG1wbERhdGEpO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gJC50bXBsKCR0bXBsSWQuYXR0cignaWQnKSk7XG4vLyB9XG5cblxubW9kdWxlLmV4cG9ydHMgPSBhamF4OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFqYXhzcGluZXIgPSB7fSxcbiAgICBzcGlubmVyLFxuICAgIHNwaW5uZXJDb250YWluZXIsXG4gICAgZGVmYXVsdE9wdHMgPSB7XG4gICAgICAgIGxpbmVzOiAxMSwgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG4gICAgICAgIGxlbmd0aDogMTUsIC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG4gICAgICAgIHdpZHRoOiA2LCAvLyBUaGUgbGluZSB0aGlja25lc3NcbiAgICAgICAgcmFkaXVzOiAxNSwgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXG4gICAgICAgIHNjYWxlOiAxLCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXG4gICAgICAgIGNvcm5lcnM6IDAuOCwgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcbiAgICAgICAgY29sb3I6ICcjMDBDM0ZGJywgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xuICAgICAgICBvcGFjaXR5OiAwLjE1LCAvLyBPcGFjaXR5IG9mIHRoZSBsaW5lc1xuICAgICAgICByb3RhdGU6IDAsIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcbiAgICAgICAgZGlyZWN0aW9uOiAxLCAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXG4gICAgICAgIHNwZWVkOiAxLCAvLyBSb3VuZHMgcGVyIHNlY29uZFxuICAgICAgICB0cmFpbDogNjAsIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXG4gICAgICAgIGZwczogMjAsIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xuICAgICAgICB6SW5kZXg6IDJlOSwgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXG4gICAgICAgIGNsYXNzTmFtZTogJ3NwaW5uZXInLCAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxuICAgICAgICB0b3A6ICc1MCUnLCAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG4gICAgICAgIGxlZnQ6ICc1MCUnLCAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxuICAgICAgICBzaGFkb3c6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIHJlbmRlciBhIHNoYWRvd1xuICAgICAgICBod2FjY2VsOiBmYWxzZSwgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcbiAgICB9O1xuXG5hamF4c3BpbmVyLnN0YXJ0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBzcGlubmVyQ29udGFpbmVyID0gb3B0aW9ucy5zcGlubmVyQ29udGFpbmVyIHx8ICdib2R5JztcbiAgICB2YXIgc3Bpbm5lclNpemUgPSBvcHRpb25zLnNwaW5uZXJTaXplIHx8ICdsYXJnZScsXG4gICAgICAgIGlzU3Bpbm5lckxvYWRpbmdUZXh0ID0gb3B0aW9ucy5pc1NwaW5uZXJMb2FkaW5nVGV4dCB8fCBmYWxzZSxcbiAgICAgICAgaXNPdmVybGF5RGl2ID0gdHlwZW9mIG9wdGlvbnMuaXNPdmVybGF5RGl2ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaXNPdmVybGF5RGl2IDogdHJ1ZSxcbiAgICAgICAgb3B0cztcblxuICAgIHN3aXRjaCAoc3Bpbm5lclNpemUpIHtcbiAgICAgICAgY2FzZSAnc21hbGwnOlxuICAgICAgICAgICAgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRPcHRzLCB7IGxpbmVzOiAxMSwgbGVuZ3RoOiA4LCB3aWR0aDogMywgcmFkaXVzOiA2IH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21lZGl1bSc6XG4gICAgICAgICAgICBvcHRzID0gJC5leHRlbmQoZGVmYXVsdE9wdHMsIHsgbGluZXM6IDExLCBsZW5ndGg6IDEwLCB3aWR0aDogNSwgcmFkaXVzOiAxMSB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvL2xhcmdlIHNpemUgZm9yIHBhZ2VcbiAgICAgICAgICAgIG9wdHMgPSBkZWZhdWx0T3B0cztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvL3ZhciBiYXNlQ2xhc3MgPSB0aGlzO1xuICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNwaW5uZXJDb250YWluZXIpO1xuXG4gICAgLy9jaGVjayBhbmQgYWRkIFwicG9zaXRpb246IHJlbGF0aXZlXCIgZm9yIHNwaW5uZXIgY29udGFpbmVyXG4gICAgaWYgKHRhcmdldC5zdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyB8fCB0YXJnZXQuc3R5bGUucG9zaXRpb24gIT09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG5cbiAgICAvL2FkZCBhamF4IG92ZXJsYXkgZGl2XG4gICAgaWYgKGlzT3ZlcmxheURpdiAhPT0gZmFsc2UpIHtcbiAgICAgICAgdmFyIG92ZXJsYXlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheURpdi5jbGFzc0xpc3QuYWRkKCdhamF4LW92ZXJsYXknKTtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG92ZXJsYXlEaXYpO1xuICAgIH1cblxuICAgIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XG4gICAgaWYgKHR5cGVvZiBpc1NwaW5uZXJMb2FkaW5nVGV4dCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNTcGlubmVyTG9hZGluZ1RleHQgPT09IHRydWUpIHtcbiAgICAgICAgdmFyIHNwaW5uZXJMb2FkaW5nVGV4dERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgdGV4dE5vdGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnTG9hZGluZyBtb3JlIC4uLicpO1xuICAgICAgICBzcGlubmVyTG9hZGluZ1RleHREaXYuYXBwZW5kQ2hpbGQodGV4dE5vdGUpO1xuICAgICAgICBzcGlubmVyTG9hZGluZ1RleHREaXYuY2xhc3NMaXN0LmFkZCgnc3Bpbm5lckxvYWRpbmdUZXh0Jyk7ICAgICAgICBcbiAgICAgICAgc3Bpbm5lckxvYWRpbmdUZXh0RGl2LmNsYXNzTGlzdC5hZGQoc3Bpbm5lclNpemUpO1xuICAgICAgICBzcGlubmVyLmVsLmFwcGVuZENoaWxkKHNwaW5uZXJMb2FkaW5nVGV4dERpdik7XG4gICAgfVxufTtcblxuYWpheHNwaW5lci5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgIHNwaW5uZXIuc3RvcCgpO1xuICAgICQoc3Bpbm5lckNvbnRhaW5lcikuZmluZCgnLmFqYXgtb3ZlcmxheScpLnJlbW92ZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBhamF4c3BpbmVyOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFqYXhzcGluZXIgPSByZXF1aXJlKCcuL2FqYXhzcGluZXInKTtcblxuZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICAgIGlmKHR5cGVvZiB1c2VySWQgIT09ICd1bmRlZmluZWQnICYmIHVzZXJJZCAhPT0gJycpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb3BlbkFqYXhQb3B1cCh1cmwsIHBvcHVwU2VsZWN0b3IpIHsgICAgXG4gICAgJC5tYWduaWZpY1BvcHVwLm9wZW4oe1xuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgc3JjOiBwb3B1cFNlbGVjdG9yXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWpheHNwaW5lci5zdGFydCh7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXJDb250YWluZXI6IHBvcHVwU2VsZWN0b3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG52YXIgdXRpbCA9IHtcbiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICBvcGVuQWpheFBvcHVwOiBvcGVuQWpheFBvcHVwXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHV0aWw7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2VhcmNoID0gcmVxdWlyZSgnLi9zZWFyY2gnKTtcblxuZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcbiAgICAkKCcudG9nZ2xlLW1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnbW9iaWxlLW1lbnUnKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHRvZ2dsZU1lbnUoKTtcbiAgICBzZWFyY2guaW5pdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBpbml0OiBpbml0XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBiaW5kQXV0b0NvbXBsZXRlKGRhdGEpIHtcbiAgICB2YXIgJHNlYXJjaFN1Z2dlc3Rpb24gPSAkKCcjc2VhcmNoLXN1Z2dlc3Rpb24nKTsgICAgXG4gICAgJHNlYXJjaFN1Z2dlc3Rpb24uZW1wdHkoKTsgXG5cbiAgICBpZihkYXRhID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsZW4gPSBkYXRhLnN1Z2dlc3Rpb25zLmxlbmd0aDtcbiAgICB2YXIgcmVzdWx0ID0gJzx1bD4nOyAgICBcbiAgICAkLmVhY2goZGF0YS5zdWdnZXN0aW9ucywgZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHsgICAgICAgIFxuICAgICAgICByZXN1bHQgKz0gJzxsaT48YSBocmVmPVwiL3NlYXJjaD93b3JkPScgKyBpdGVtLnNlbGVjdCArICcmdHlwZT12aVwiPicgKyAkKGl0ZW0uZGF0YSkuaHRtbCgpICsgJzwvYT48L2xpPic7XG4gICAgfSk7XG4gICAgJHNlYXJjaFN1Z2dlc3Rpb24uYXBwZW5kKHJlc3VsdCArICc8L3VsPicpO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hBdXRvY29tcGxldGUoKSB7XG4gICAgJChcIiN3b3JkXCIpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgd29yZCA9ICRzZWxmLnZhbCgpLnRyaW0oKTtcbiAgICAgICAgaWYod29yZCA9PT0gJycpIHtcbiAgICAgICAgICAgIGJpbmRBdXRvQ29tcGxldGUobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gXG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvYXBpL3ZpZGljdC9hdXRvY29tcGxldGUvXCIgKyAkKHRoaXMpLnZhbCgpLnRyaW0oKSwgICAgICAgICAgICAgIFxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHsgICAgICBcbiAgICAgICAgICAgICAgICBiaW5kQXV0b0NvbXBsZXRlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgICAgIFxuICAgIH0pOyAgICBcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBzZWFyY2hBdXRvY29tcGxldGUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5pdDogaW5pdFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBjb25zb2xlLmxvZygnSG9tZSBQYWdlJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGluaXQ6IGluaXRcbn0iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vaGVscGVycy91dGlsJyksXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYWpheCcpO1xuXG5mdW5jdGlvbiBvcGVuQWRkV29yZFBvcHVwKCkge1xuICAgICQoJyNhZGRUb0xpc3QnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoIXV0aWwuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICQubWFnbmlmaWNQb3B1cC5vcGVuKHtcbiAgICAgICAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgICAgICAgICBzcmM6ICcuYXV0aGVuLXBvcHVwJyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLm1hZ25pZmljUG9wdXAub3Blbih7XG4gICAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3JjOiAnLmFkZC10by1saXN0LXBvcHVwJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGFqYXguZ2V0KCcvYXBpL2xpc3RzJykuZG9uZShmdW5jdGlvbihsaXN0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChsaXN0cywgZnVuY3Rpb24oaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBsaXN0Ll9pZCArICdcIj4nICsgbGlzdC50aXRsZSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdG8tbGlzdC1wb3B1cCAjbGlzdCcpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10by1saXN0LXBvcHVwICNsaXN0JykuYXBwZW5kKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRXb3JkVG9MaXN0KCkge1xuICAgIHZhciAkYWRkVG9MaXN0UG9wdXAgPSAkKCcjYWRkLXRvLWxpc3QtcG9wdXAnKTtcbiAgICAkYWRkVG9MaXN0UG9wdXAub24oJ2NsaWNrJywgJ2J1dHRvbicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHdvcmQ6ICRhZGRUb0xpc3RQb3B1cC5maW5kKCcuaGVyby10aXRsZScpLnRleHQoKSxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVRvRW46ICcnLFxuICAgICAgICAgICAgdHJhbnNsYXRlVG9WaTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnRfc2VsZWN0YWJsZScpLm91dGVySFRNTCxcbiAgICAgICAgICAgIGxpc3RJZDogJGFkZFRvTGlzdFBvcHVwLmZpbmQoJyNsaXN0JykudmFsKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvYXBpL3dvcmRzJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBvcGVuQWRkV29yZFBvcHVwKCk7XG4gICAgYWRkV29yZFRvTGlzdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBpbml0OiBpbml0XG59Il19"}