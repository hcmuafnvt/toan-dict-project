{"version":3,"sources":["node_modules/browser-pack/_prelude.js","public/js/app.js","public/js/helpers/ajax.js","public/js/helpers/ajaxspiner.js","public/js/helpers/util.js","public/js/modules/header.js","public/js/modules/search.js","public/js/pages/home.page.js","public/js/pages/learn.page.js","public/js/pages/searchresult.page.js","public/js/pages/wordcrawler.page.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar header = require('./modules/header'),\n    util = require('./helpers/util');\n\nvar pages = {\n    homepage: require('./pages/home.page'),\n    searchresultpage: require('./pages/searchresult.page'),\n    learnpage: require('./pages/learn.page'),\n    wordcrawlerpage: require('./pages/wordcrawler.page')\n}\n\nfunction loadJavascriptForPage() {\n    if (typeof window.pageContext === 'undefined' || typeof window.pageContext.pageName === 'undefined') {\n        return;\n    }\n\n    if (typeof pages[window.pageContext.pageName] !== 'undefined') {\n        pages[window.pageContext.pageName].init();\n    }\n}\n\nfunction lookupHighlightText() {\n    var mouseDownTop, mouseUpTop, translateButtonPosition;\n    if (util.isMobile()) {\n        var selectionEndTimeout;\n        document.onselectionchange = function () {\n            selectionEndTimeout = setTimeout(function () {\n                // reset selection timeout\n                selectionEndTimeout = null;\n                showTranslateButton();\n            }, 500);\n        }\n    } else {\n        $('body').on('mousedown', function(e) {            \n            mouseDownTop = e.pageY;            \n        }).on('mouseup', function (e) {            \n            mouseUpTop = e.pageY;                    \n            translateButtonPosition = mouseDownTop + ((mouseUpTop - mouseDownTop) / 2) - 20;            \n            showTranslateButton(translateButtonPosition);            \n        });\n    }\n\n    $('#translate-text').on('click', function (e) {\n        e.preventDefault();\n        $.magnificPopup.open({                        \n            type: 'ajax',            \n            items: { src: '/api/translate/en-vi' },\n            ajax: {\n                settings: {\n                    method: 'POST',\n                    'content-type': 'application/json',\n                    data: {text :  $('#translate-text').data('text')}\n                }\n            },\n            callbacks: {\n                parseAjax: function(mfpResponse) {\n                    var $translatePopup = $('#translate-popup-wrapper');\n                    $translatePopup.find('.content').html('<p>' + mfpResponse.data.translated + '</p>');\n                    mfpResponse.data = $('#translate-popup-wrapper').html();                \n                },\n                ajaxContentAdded: function() {\n                    // Ajax content is loaded and appended to DOM\n                    //console.log(this.content);\n                }\n            }\n        });\n    });\n\n    // $('#translate-text').magnificPopup({\n    //     type: 'ajax',\n    //     // ajax: {\n    //     //     settings: {\n    //     //         method: 'POST',\n    //     //         'content-type': 'application/json',\n    //     //         data: {text :  $('#translate-text').data('text')}\n    //     //     }\n    //     // },\n    //     callbacks: {\n    //         // parseAjax: function(mfpResponse) {\n    //         //     var $translatePopup = $('#translate-popup-wrapper');\n    //         //     $translatePopup.find('.content').html('<p>' + mfpResponse.data.translated + '</p>');\n    //         //     mfpResponse.data = $('#translate-popup-wrapper').html();                \n    //         // },\n    //         // ajaxContentAdded: function() {\n    //         //     // Ajax content is loaded and appended to DOM\n    //         //     //console.log(this.content);\n    //         // }\n    //         open: function () {\n    //             $.ajax({\n    //                 url: \"/api/translate/en-vi\",\n    //                 method: \"POST\",\n    //                 data: { text: $('#translate-text').data('text') },\n    //                 success: function (data) {\n    //                     if (data.success == true) {\n    //                         var $translatePopup = $('#translate-popup-wrapper');\n    //                         $translatePopup.find('.content').html('<p>' + data.translated + '</p>');\n    //                         parent.html($('#translate-popup-wrapper').html());\n    //                     }\n    //                 }\n    //             });\n    //         }\n    //     }\n    // })\n}\n\nfunction showTranslateButton(translateButtonPosition) {\n    var $translateText = $('#translate-text');\n    var text = '';\n    if (window.getSelection) {\n        text = window.getSelection().toString();\n    } else if (document.selection) {\n        text = document.selection.createRange().text;\n    }\n\n    if (text != '') {\n        $translateText.data('text', text);        \n        if(typeof translateButtonPosition !== 'undefined') {\n            $translateText.css({'top': translateButtonPosition});\n        }        \n        $translateText.addClass('active');\n    } else {\n        $translateText.removeClass('active');        \n    }\n}\n\nvar app = {\n    init: function () {\n        header.init();\n        loadJavascriptForPage();\n        lookupHighlightText();\n    }\n};\n\n$(function () {\n    app.init();\n});","'use strict';\n\nvar ajaxspiner = require('./ajaxspiner'),\n    util = require('./util'),\n    ajax = {};\n\n// function addAccessTokenToAjaxHeader(self, xhr) {\n//     if (window.user.userId !== 0) {\n//         if (typeof window.expat.access_token === 'undefined') {\n//             self.getAccessToken();\n//             if (typeof window.expat.access_token === 'undefined') {\n//                 xhr.abort();\n//             } else {\n//                 xhr.setRequestHeader(\"Authorization\", \"Bearer \" + window.expat.access_token);\n//             }\n//         } else {\n//             xhr.setRequestHeader(\"Authorization\", \"Bearer \" + window.expat.access_token);\n//         }\n//     }\n// }\n\najax.get = function (url, options) {    \n    var deferred = $.Deferred();\n    var ajaxSpinnerInstance;\n    var opts = $.extend({}, options);    \n\n    $.ajax({\n        method: 'GET',\n        url: url,\n        contentType: 'application/json',\n        beforeSend: function (xhr) {\n            // if (opts.isDisplaySpinner !== false) {\n            //     ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n            //     ajaxSpinnerInstance.startSpinner();\n            // }\n\n            //addAccessTokenToAjaxHeader(self, xhr);\n        },\n        success: function (data) {\n            deferred.resolve(data);\n        },\n        error: function (error) {            \n            deferred.reject(error);\n        },\n        complete: function () {\n            // if (opts.isDisplaySpinner !== true) {\n            //     ajaxSpinnerInstance.stopSpinner();\n            // }\n        }\n    });\n\n    return deferred.promise();\n};\n\n// ajax.delete = function (url, options) {    \n//     var deferred = $.Deferred();\n//     var ajaxSpinnerInstance;\n//     var opts = $.extend({}, options);\n    \n//     $.ajax({\n//         method: 'DELETE',\n//         url: url,\n//         contentType: 'application/json',\n//         beforeSend: function (xhr) {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n//                 ajaxSpinnerInstance.startSpinner();\n//             }\n\n//             if (url.indexOf('/api/') !== -1) {\n//                 addAccessTokenToAjaxHeader(self, xhr);\n//             }\n//         },\n//         success: function (data) {\n//             deferred.resolve(data);\n//         },\n//         error: function (error) {\n//             window.expat.access_token = undefined;\n//             deferred.reject(error);\n//         },\n//         complete: function () {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance.stopSpinner();\n//             }\n//         }\n//     });\n\n//     return deferred.promise();\n// };\n\n// /*\n//  * - url : api url\n//  * - options\n//  *  + spinnerSize : spinner size (small, medium, large), default is large\n//  *  + spinnerContainer : container to append spinner and overlay, default is body\n//  *  + spinnerContainer : By default, spinner is showed. Set value to false to hide spinner\n//  *  + isSpinnerLoadingText : used to add \"Loading ...\" text under spinner icon\n//  *  + isOverlayDiv : for display overlay div, default is true\n//  * - postData : api post data\n//  */\n// BaseClass.prototype.sendPost = function (url, options, postData) {\n//     var self = this;\n//     var deferred = $.Deferred();\n//     var ajaxSpinnerInstance;\n//     var opts = $.extend({}, options);\n//     postData = $.extend({ LoginUserId: expat.user.userId }, postData);\n\n//     var contentType = typeof opts.contentType !== 'undefined' ? opts.contentType : 'application/x-www-form-urlencoded; charset=UTF-8';\n//     if (opts.isStringify) {\n//         postData = JSON.stringify(postData);\n//     }\n\n//     if (url.indexOf('/api/') !== -1) {\n//         contentType = 'application/json';\n//         postData = JSON.stringify(postData);\n//     }\n//     var ajaxOptions = {\n//         method: 'POST',\n//         url: url,\n//         data: postData,\n//         contentType: contentType,\n//         //dataType: 'json',\n//         beforeSend: function (xhr) {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance = new AjaxSpinner(opts.spinnerSize, opts.spinnerContainer, opts.isSpinnerLoadingText, opts.isOverlayDiv);\n//                 ajaxSpinnerInstance.startSpinner();\n//             }\n\n//             if (url.indexOf('/api/') !== -1) {\n//                 addAccessTokenToAjaxHeader(self, xhr);\n//             }\n//         },\n//         success: function (data) {\n//             deferred.resolve(data);\n//         },\n//         error: function (error) {\n//             window.expat.access_token = undefined;\n//             deferred.reject(error);\n//         },\n//         complete: function () {\n//             if (typeof opts.isDisplaySpinner === 'undefined' || opts.isDisplaySpinner === true) {\n//                 ajaxSpinnerInstance.stopSpinner();\n//             }\n//         }\n//     };\n\n//     $.ajax(ajaxOptions);\n\n//     return deferred.promise();\n// };\n\n// /*\n//  * - url : jquery template url\n//  * - tmplId : template id\n//  * - tmplData : data to bind into template\n//  */\n// BaseClass.prototype.generateTmpl = function (url, tmplId, tmplData) {\n//     var baseClass = this;\n//     var deferred = $.Deferred();\n\n//     var $tmplId = $(tmplId);\n//     if ($tmplId.length) {\n//         deferred.resolve(bindTmpl($tmplId, tmplData));\n//     }\n//     else {\n//         baseClass.sendGet(url, { isDisplaySpinner: false }).done(function (template) {\n//             $('body').append(template);\n//             deferred.resolve(bindTmpl($(tmplId), tmplData));\n//         }).fail(function (error) {\n//             deferred.reject(error);\n//         });\n//     }\n\n//     return deferred;\n// };\n\n// //========================================\n// // Private functions\n\n// function bindTmpl($tmplId, tmplData) {\n//     $.template($tmplId.attr('id'), $tmplId);\n//     if (typeof tmplData !== 'undefined') {\n//         return $.tmpl($tmplId.attr('id'), tmplData);\n//     }\n//     return $.tmpl($tmplId.attr('id'));\n// }\n\n\nmodule.exports = ajax;","'use strict';\n\nvar ajaxspiner = {},\n    spinner,\n    spinnerContainer,\n    defaultOpts = {\n        lines: 11, // The number of lines to draw\n        length: 15, // The length of each line\n        width: 6, // The line thickness\n        radius: 15, // The radius of the inner circle\n        scale: 1, // Scales overall size of the spinner\n        corners: 0.8, // Corner roundness (0..1)\n        color: '#00C3FF', // #rgb or #rrggbb or array of colors\n        opacity: 0.15, // Opacity of the lines\n        rotate: 0, // The rotation offset\n        direction: 1, // 1: clockwise, -1: counterclockwise\n        speed: 1, // Rounds per second\n        trail: 60, // Afterglow percentage\n        fps: 20, // Frames per second when using setTimeout() as a fallback for CSS\n        zIndex: 2e9, // The z-index (defaults to 2000000000)\n        className: 'spinner', // The CSS class to assign to the spinner\n        top: '50%', // Top position relative to parent\n        left: '50%', // Left position relative to parent\n        shadow: false, // Whether to render a shadow\n        hwaccel: false, // Whether to use hardware acceleration\n        position: 'absolute' // Element positioning\n    };\n\najaxspiner.start = function (options) {\n    options = options || {};\n    spinnerContainer = options.spinnerContainer || 'body';\n    var spinnerSize = options.spinnerSize || 'large',\n        isSpinnerLoadingText = options.isSpinnerLoadingText || false,\n        isOverlayDiv = typeof options.isOverlayDiv !== 'undefined' ? options.isOverlayDiv : true,\n        opts;\n\n    switch (spinnerSize) {\n        case 'small':\n            opts = $.extend(defaultOpts, { lines: 11, length: 8, width: 3, radius: 6 });\n            break;\n        case 'medium':\n            opts = $.extend(defaultOpts, { lines: 11, length: 10, width: 5, radius: 11 });\n            break;\n        default: //large size for page\n            opts = defaultOpts;\n            break;\n    }\n    //var baseClass = this;\n    var target = document.querySelector(spinnerContainer);\n\n    //check and add \"position: relative\" for spinner container\n    if (target.style.position !== 'absolute' || target.style.position !== 'relative') {\n        target.style.position = 'relative';\n    }\n\n    //add ajax overlay div\n    if (isOverlayDiv !== false) {\n        var overlayDiv = document.createElement('div');\n        overlayDiv.classList.add('ajax-overlay');\n        target.appendChild(overlayDiv);\n    }\n\n    spinner = new Spinner(opts).spin(target);\n    if (typeof isSpinnerLoadingText !== 'undefined' && isSpinnerLoadingText === true) {\n        var spinnerLoadingTextDiv = document.createElement('div');\n        var textNote = document.createTextNode('Loading more ...');\n        spinnerLoadingTextDiv.appendChild(textNote);\n        spinnerLoadingTextDiv.classList.add('spinnerLoadingText');        \n        spinnerLoadingTextDiv.classList.add(spinnerSize);\n        spinner.el.appendChild(spinnerLoadingTextDiv);\n    }\n};\n\najaxspiner.stop = function () {\n    spinner.stop();\n    $(spinnerContainer).find('.ajax-overlay').remove();\n};\n\nmodule.exports = ajaxspiner;","'use strict';\n\nvar ajaxspiner = require('./ajaxspiner');\n\nfunction isMobile() {\n    var mobileAgentHash = ['mobile', 'tablet', 'phone', 'ipad', 'ipod', 'android', 'blackberry', 'windows ce', 'opera mini', 'palm'];\n    var    idx = 0;\n    var isMobile = false;\n    var userAgent = (navigator.userAgent).toLowerCase();\n\n    while (mobileAgentHash[idx] && !isMobile) {\n        isMobile = (userAgent.indexOf(mobileAgentHash[idx]) >= 0);\n        idx++;\n    }\n    return isMobile;\n}\n\nfunction isAuthenticated() {\n    if(typeof userId !== 'undefined' && userId !== '')\n        return true;\n    return false;\n}\n\nfunction openAjaxPopup(url, popupSelector) {    \n    $.magnificPopup.open({\n        items: {\n            src: popupSelector\n        },\n        callbacks: {\n            beforeOpen: function() {\n                ajaxspiner.start({\n                    spinnerContainer: popupSelector\n                });\n            }\n        }\n    });\n}\n\nvar util = {\n    isMobile: isMobile,\n    isAuthenticated: isAuthenticated,\n    openAjaxPopup: openAjaxPopup\n};\n\nmodule.exports = util;","'use strict';\n\nvar search = require('./search');\n\nfunction toggleMenu() {\n    $('.toggle-menu').on('click', function (e) {\n        e.preventDefault();\n        $('body').toggleClass('mobile-menu');\n    })\n}\n\nfunction init() {\n    toggleMenu();\n    search.init();\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nvar util = require('../helpers/util');\n\nfunction initpage() {\n    //bind search input\n    var searchType = $('#hdfType').val();\n    var $wordInput = $('#word');\n    if(searchType === 'en-vi') { //en-vi\n        $wordInput.attr('placeholder', 'English - Vietnamese');\n    } else if(searchType === 'en-en') { //en-en\n        $wordInput.attr('placeholder', 'English - English');\n    } else if(searchType === 'vi-en') { //vi-en\n        $wordInput.attr('placeholder', 'Vietnamese - English');\n    }\n\n    //bind data for dict type\n    $('.dict-type li').removeClass('active');\n    $('.dict-type').find('li[data-type=\"' + searchType + '\"]').addClass('active');\n}\n\nfunction searchAutocomplete() {\n    $(\"#word\").on('input', function(e) {        \n        console.time('autocomplete');    \n        var $self = $(this);\n        var word = $self.val().trim();\n        $self.data('word', word);\n        if(word.length < 1) {\n            //$('#btn-clearinput').removeClass('active');\n            bindAutoComplete(null);\n            return;\n        } \n\n        //$('#btn-clearinput').addClass('active');\n\n        var pagesize = 5, wWidth = $(window).outerWidth();\n        if(wWidth >= 768 && wWidth < 1024) {\n            pagesize = 8;\n        } else if (wWidth >= 1024) {\n            pagesize = 20;\n        }\n\n        $.ajax({\n            url: '/api/autocomplete/word/' + $('#hdfType').val() + '/' + pagesize + '/' + $(this).val().trim(),              \n            method: 'GET',\n            dataType: \"json\",\n            success: function (data) {\n                bindAutoComplete(data);                \n                console.timeEnd('autocomplete');                \n            }\n        });     \n    }); \n\n    $('#btn-clearinput').on('click', function(e) {\n        e.preventDefault();\n        console.log('asdsa');\n    });\n}\n\n//private function\nfunction bindAutoComplete(data) {\n    var $searchSuggestion = $('#search-suggestion');    \n    $searchSuggestion.empty(); \n\n    if(data == null || data.length === 0) {\n        $searchSuggestion.trigger('hide');\n        return;\n    }\n\n    var tmplSearchSuggestion = \n    '<ul>' +\n        '{{each words}}' +\n            '<li>' +\n                '<a class=\"autosearch-item\" href=\"/definition/' + $('#hdfType').val() + '/${name}\">' +\n                    '<p class=\"word-name\"><span class=\"name\">${name}</span> <span class=\"phonetic-spelling\">${phoneticSpelling}</span></p>' +\n                    '<p class=\"word-mean\">{{if mainType}}<span class=\"main-type\">[${mainType}]</span>{{/if}} {{if mainViMean}}{{html mainViMean}}{{else}}{{html mainEnMean}}{{/if}}</p>' +\n                '</a>' +                \n            '</li>' +\n        '{{/each}}' +\n    '</ul>';    \n    $.tmpl(tmplSearchSuggestion, {words: data}).appendTo('#search-suggestion');\n    $searchSuggestion.trigger('show');\n}\n\nfunction submitForm() {\n    $('.frmSearch').on('submit', function(e) {\n        //$('#word').attr('disabled', 'true');\n        e.preventDefault();\n        window.location.href = '/definition/' + $('#hdfType').val() + '/' + $('#word').val().trim();\n    });\n}\n\nfunction showHideSearchSuggestion() {\n    $('#search-suggestion').on('show', function(e) {\n        e.preventDefault();        \n        $(this).slideDown();\n        $('.search-section').css({'position': 'absolute'});\n    });\n\n    $('#search-suggestion').on('hide', function(e) {\n        e.preventDefault();\n        $(this).hide();\n        $('.search-section').css({'position': 'fixed'});\n    });\n}\n\nfunction selectSearchType() {\n    var $selectTypeContent = $('.select-types-content');\n    $('.select-icons').on('click', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        $(this).toggleClass('active');\n        $('#search-suggestion').trigger('hide');\n        $selectTypeContent.toggleClass('active');        \n    });\n    \n    $selectTypeContent.on('click', 'li', function(e) {\n        e.preventDefault();\n        var $self = $(this);\n        $selectTypeContent.find('li').removeClass('active');\n        $self.addClass('active');\n        $selectTypeContent.find('#hdfType').val($self.data('type'));\n        $selectTypeContent.removeClass('active');\n        $('.select-icons').removeClass('active');\n        $('#word').attr('placeholder', $self.text()).val('').data('word', '').focus();\n    });\n}\n\nfunction handleClickOnWindow() {  \n    if(/iP/i.test(navigator.userAgent)) {\n        $('*:not(\"a\")').css('cursor', 'pointer');\n    };\n    \n    $(document).click(function() {\n        $('#search-suggestion').trigger('hide');\n        $('.select-types-content').removeClass('active');\n        $('.select-icons').removeClass('active');\n    });\n}\n\nfunction handleKeyDown() {\n    if(util.isMobile()) { \n        console.log('handleKeyDown : isMobile');\n        return;\n    }\n    \n    var $searchSuggestion = $('#search-suggestion');\n    var $inutWord = $('#word');    \n    $inutWord.on('keydown', function(e) {                     \n        if($searchSuggestion.css('display') === 'none') return;        \n\n        var originInputValue = $inutWord.data('word');\n\n        if(e.keyCode === 27) { //esc \n             $searchSuggestion.hide().empty();\n             $inutWord.val(originInputValue);\n        }\n        \n        if(e.keyCode === 38) { //up\n            var $prev = $searchSuggestion.find('li.active').prev();\n            $searchSuggestion.find('li.active').removeClass('active');\n            if($prev.length > 0) {                \n                $prev.addClass('active');\n                $inutWord.val($prev.find('.name').text());\n            } else {\n                $inutWord.val(originInputValue);\n            }\n            e.preventDefault();\n        } else if(e.keyCode === 40) { //down\n            if($searchSuggestion.find('li.active').length > 0) {\n                 $searchSuggestion.find('li:not(:last-child).active').removeClass('active').next().addClass('active');                 \n            } else {\n                $searchSuggestion.find('li:first').addClass('active');\n            }\n            $inutWord.val($searchSuggestion.find('li.active:first').find('.name').text());\n            e.preventDefault();\n        }\n        var $currentItem = $searchSuggestion.find('li.active:first');\n        if($currentItem.length > 0) {\n            $searchSuggestion.scrollTop(0);            \n            $searchSuggestion.scrollTop(($currentItem.position().top - $searchSuggestion.height()) + $currentItem.height());            \n        }        \n    });\n}\n\nfunction init() {    \n    $('#home-page #word').focus();\n    initpage();\n    searchAutocomplete();\n    submitForm();\n    selectSearchType();\n    handleClickOnWindow();    \n    handleKeyDown();\n    showHideSearchSuggestion();\n    //inputFocusOut();\n}\n\nmodule.exports = {\n    init: init\n};\n","'use strict';\nvar util = require('../helpers/util');\n\nfunction handleWindowScroll() {\n    var $window = $(window);\n    $window.scroll(function() {        \n        var $window = $(window);\n        if($window.width() < 1024 || util.isMobile()) return;\n\n        if($window.scrollTop() >= 300) {                \n            $('.search-section').addClass('fix-top').css({'z-index': '99999'});\n            $('.about-section').css({'margin-top': '300px'});\n        } else {                \n            $('.search-section').removeClass('fix-top').css({'z-index': '1'});              \n            $('.about-section').css({'margin-top': '0px'});\n        }  \n    });\n}\n\n\nfunction init() {\n    handleWindowScroll();\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nfunction resetNotice() {\n    var $notice = $('#notice');\n    $notice.find('.correct').addClass('hide');\n    $notice.find('.incorrect').addClass('hide').text('');\n    $notice.find('.btn-ignore').show();\n    $('.btn-check').text('Check');\n}\n\nfunction check() {\n    var arrQuestions = $('.question-container').toArray(), qIndex = 1;\n    $('.btn-check').on('click', function (e) {\n        e.preventDefault();\n        var $self = $(this),\n            $questionContainer = $self.parents('.question-container'),                       \n            $hdfAnswer = $questionContainer.find('.hdfAnswer');\n\n            console.log(arrQuestions);\n\n        if ($self.text() === 'Check') {\n            var userAnswer = '';\n            // get userAnswer\n            if($questionContainer.data('type') === 1) {\n                userAnswer = $questionContainer.find('input[type=radio]:checked').val().trim().toLowerCase();\n            }\n            if($questionContainer.data('type') === 2 || $questionContainer.data('type') === 3 || $questionContainer.data('type') === 4) {\n                userAnswer = $questionContainer.find('.txt-answer').val().trim();\n            }            \n\n            // answer\n            var answer = $hdfAnswer.val().trim().toLowerCase();\n            \n            if (userAnswer === answer) {\n                $questionContainer.addClass('passed');\n                $('#notice').find('.correct').removeClass('hide');\n                $('#notice').find('.incorrect').addClass('hide');\n                $('#notice').find('.btn-ignore').hide();\n            } else {                \n                $('#notice').find('.correct').addClass('hide');\n                $('#notice').find('.incorrect').removeClass('hide');\n                $('#notice').find('.incorrect').text('Correct is : ' + $questionContainer.find('.hdfAnswer').val());\n                $('#notice').find('.btn-ignore').hide();\n            }          \n\n            $self.text('Continue');\n        } else {\n            $questionContainer.fadeOut(500, function () {                \n                resetNotice();\n                if(arrQuestions.length > qIndex) {\n                    $(arrQuestions[qIndex]).fadeIn(500);\n                    qIndex++;\n                } else {\n                    if($('.question-container:not(.passed)').length > 0) {\n                        arrQuestions = $('.question-container:not(.passed)').toArray();\n                        qIndex = 1;\n                         $('.question-container:not(.passed):first').fadeIn(500);\n                    } else {\n                        $('#finish').removeClass('hide');\n                    }                        \n                }                             \n            });\n        }\n    });\n}\n\nfunction playSound() { \n    $('.sound').on('click', function(e) {\n        e.preventDefault();\n        var audio = new Audio($(this).data('src'));\n        audio.play();\n    })\n}\n\nfunction init() {\n    check();\n    playSound();\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nvar util = require('../helpers/util'),\n    ajax = require('../helpers/ajax');\n\nfunction initPage() {\n    var $moreExamples = $('.more-examples');\n    $moreExamples.each(function() {\n        if($(this).find('.ex').length === 0) $(this).remove();\n    });\n}\n\nfunction openAddWordPopup() {\n    $('#addToList').on('click', function(e) {\n        e.preventDefault();\n        if(!util.isAuthenticated()) {\n            $.magnificPopup.open({\n                items: {\n                    src: '.authen-popup'                    \n                }\n            });\n            return;\n        } else {\n            $.magnificPopup.open({\n                items: {\n                    src: '.add-to-list-popup'\n                },\n                callbacks: {\n                    beforeOpen: function() {\n                        var options = '';\n                        ajax.get('/api/lists').done(function(lists) {\n                            $.each(lists, function(index, list) {\n                                options += '<option value=\"' + list._id + '\">' + list.title + '</option>';\n                            });\n                            $('.add-to-list-popup #list').empty();\n                            $('.add-to-list-popup #list').append(options);\n                        }).fail(function(err) {\n                            console.log(err);\n                        });\n                    }\n                }\n            });\n        }\n    });\n}\n\nfunction addWordToList() {\n    var $addToListPopup = $('#add-to-list-popup');\n    $addToListPopup.on('click', 'button', function(e) {\n        e.preventDefault();\n        var data = {\n            word: $addToListPopup.find('.hero-title').text(),\n            translateToEn: '',\n            translateToVi: document.getElementById('content_selectable').outerHTML,\n            listId: $addToListPopup.find('#list').val()\n        }\n\n        console.log(data);\n\n        $.ajax({\n            url: '/api/words',\n            method: 'POST',\n            data: data,\n            success: function(result) {\n                console.log(result);\n            },\n            error: function(err) {\n                console.log(err);\n            }\n        })\n    })\n}\n\nfunction selectDictType() {\n    $('.select-dict-type li, .menu-dict-type li').on('click', function(e) {\n        e.preventDefault();\n        window.location.href = '/definition/' + $(this).data('type') + '/' + $('.word-name').text().trim().toLowerCase();\n    });\n}\n\nfunction expandCollapseTypeOfWord() {\n    $('.type-of-word').on('click', function(e) {\n        e.preventDefault();\n        $(this).siblings('.l1-group').slideToggle();\n        $(this).toggleClass('collapsed');\n    })\n}\n\nfunction expandCollapseMoreExamples() {\n    $('.btn-more-exg').on('click', function(e) {\n        e.preventDefault();\n        $(this).siblings('.exg').slideToggle();\n        $(this).toggleClass('collapsed');\n    })\n}\n\nfunction init() {\n    initPage();\n    selectDictType();\n    expandCollapseTypeOfWord();\n    expandCollapseMoreExamples();\n}\n\nmodule.exports = {\n    init: init\n}","'use strict';\n\nfunction submit() {\n    $('#btn-submit').on('click', function(e) {\n        e.preventDefault();\n        console.log('crawler');\n        var postData = {\n            url: $('#url').val(),\n            fromindex: $('#fromindex').val(),\n            toindex: $('#toindex').val()\n        };        \n\n        $.ajax({\n            url: '/api/wordcrawler',\n            method: 'POST',\n            data: postData,\n            success: function(result) {\n                $('#msg').text(result).removeClass('hide');                \n            },\n            error: function(error) {\n                $('#msg').text(error).removeClass('hide');\n            }\n        });\n    });    \n}\n\nfunction init() {\n    submit();\n}\n\nmodule.exports = {\n    init: init\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvanMvYXBwLmpzIiwicHVibGljL2pzL2hlbHBlcnMvYWpheC5qcyIsInB1YmxpYy9qcy9oZWxwZXJzL2FqYXhzcGluZXIuanMiLCJwdWJsaWMvanMvaGVscGVycy91dGlsLmpzIiwicHVibGljL2pzL21vZHVsZXMvaGVhZGVyLmpzIiwicHVibGljL2pzL21vZHVsZXMvc2VhcmNoLmpzIiwicHVibGljL2pzL3BhZ2VzL2hvbWUucGFnZS5qcyIsInB1YmxpYy9qcy9wYWdlcy9sZWFybi5wYWdlLmpzIiwicHVibGljL2pzL3BhZ2VzL3NlYXJjaHJlc3VsdC5wYWdlLmpzIiwicHVibGljL2pzL3BhZ2VzL3dvcmRjcmF3bGVyLnBhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGVhZGVyID0gcmVxdWlyZSgnLi9tb2R1bGVzL2hlYWRlcicpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL2hlbHBlcnMvdXRpbCcpO1xuXG52YXIgcGFnZXMgPSB7XG4gICAgaG9tZXBhZ2U6IHJlcXVpcmUoJy4vcGFnZXMvaG9tZS5wYWdlJyksXG4gICAgc2VhcmNocmVzdWx0cGFnZTogcmVxdWlyZSgnLi9wYWdlcy9zZWFyY2hyZXN1bHQucGFnZScpLFxuICAgIGxlYXJucGFnZTogcmVxdWlyZSgnLi9wYWdlcy9sZWFybi5wYWdlJyksXG4gICAgd29yZGNyYXdsZXJwYWdlOiByZXF1aXJlKCcuL3BhZ2VzL3dvcmRjcmF3bGVyLnBhZ2UnKVxufVxuXG5mdW5jdGlvbiBsb2FkSmF2YXNjcmlwdEZvclBhZ2UoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cucGFnZUNvbnRleHQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cucGFnZUNvbnRleHQucGFnZU5hbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHBhZ2VzW3dpbmRvdy5wYWdlQ29udGV4dC5wYWdlTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHBhZ2VzW3dpbmRvdy5wYWdlQ29udGV4dC5wYWdlTmFtZV0uaW5pdCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9va3VwSGlnaGxpZ2h0VGV4dCgpIHtcbiAgICB2YXIgbW91c2VEb3duVG9wLCBtb3VzZVVwVG9wLCB0cmFuc2xhdGVCdXR0b25Qb3NpdGlvbjtcbiAgICBpZiAodXRpbC5pc01vYmlsZSgpKSB7XG4gICAgICAgIHZhciBzZWxlY3Rpb25FbmRUaW1lb3V0O1xuICAgICAgICBkb2N1bWVudC5vbnNlbGVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbkVuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBzZWxlY3Rpb24gdGltZW91dFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZFRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNob3dUcmFuc2xhdGVCdXR0b24oKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCdib2R5Jykub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIG1vdXNlRG93blRvcCA9IGUucGFnZVk7ICAgICAgICAgICAgXG4gICAgICAgIH0pLm9uKCdtb3VzZXVwJywgZnVuY3Rpb24gKGUpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIG1vdXNlVXBUb3AgPSBlLnBhZ2VZOyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB0cmFuc2xhdGVCdXR0b25Qb3NpdGlvbiA9IG1vdXNlRG93blRvcCArICgobW91c2VVcFRvcCAtIG1vdXNlRG93blRvcCkgLyAyKSAtIDIwOyAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hvd1RyYW5zbGF0ZUJ1dHRvbih0cmFuc2xhdGVCdXR0b25Qb3NpdGlvbik7ICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoJyN0cmFuc2xhdGUtdGV4dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJC5tYWduaWZpY1BvcHVwLm9wZW4oeyAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLCAgICAgICAgICAgIFxuICAgICAgICAgICAgaXRlbXM6IHsgc3JjOiAnL2FwaS90cmFuc2xhdGUvZW4tdmknIH0sXG4gICAgICAgICAgICBhamF4OiB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt0ZXh0IDogICQoJyN0cmFuc2xhdGUtdGV4dCcpLmRhdGEoJ3RleHQnKX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICAgICAgcGFyc2VBamF4OiBmdW5jdGlvbihtZnBSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRyYW5zbGF0ZVBvcHVwID0gJCgnI3RyYW5zbGF0ZS1wb3B1cC13cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgICAgICR0cmFuc2xhdGVQb3B1cC5maW5kKCcuY29udGVudCcpLmh0bWwoJzxwPicgKyBtZnBSZXNwb25zZS5kYXRhLnRyYW5zbGF0ZWQgKyAnPC9wPicpO1xuICAgICAgICAgICAgICAgICAgICBtZnBSZXNwb25zZS5kYXRhID0gJCgnI3RyYW5zbGF0ZS1wb3B1cC13cmFwcGVyJykuaHRtbCgpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFqYXhDb250ZW50QWRkZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBamF4IGNvbnRlbnQgaXMgbG9hZGVkIGFuZCBhcHBlbmRlZCB0byBET01cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAkKCcjdHJhbnNsYXRlLXRleHQnKS5tYWduaWZpY1BvcHVwKHtcbiAgICAvLyAgICAgdHlwZTogJ2FqYXgnLFxuICAgIC8vICAgICAvLyBhamF4OiB7XG4gICAgLy8gICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAvLyAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIC8vICAgICAvLyAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgLy8gICAgIC8vICAgICAgICAgZGF0YToge3RleHQgOiAgJCgnI3RyYW5zbGF0ZS10ZXh0JykuZGF0YSgndGV4dCcpfVxuICAgIC8vICAgICAvLyAgICAgfVxuICAgIC8vICAgICAvLyB9LFxuICAgIC8vICAgICBjYWxsYmFja3M6IHtcbiAgICAvLyAgICAgICAgIC8vIHBhcnNlQWpheDogZnVuY3Rpb24obWZwUmVzcG9uc2UpIHtcbiAgICAvLyAgICAgICAgIC8vICAgICB2YXIgJHRyYW5zbGF0ZVBvcHVwID0gJCgnI3RyYW5zbGF0ZS1wb3B1cC13cmFwcGVyJyk7XG4gICAgLy8gICAgICAgICAvLyAgICAgJHRyYW5zbGF0ZVBvcHVwLmZpbmQoJy5jb250ZW50JykuaHRtbCgnPHA+JyArIG1mcFJlc3BvbnNlLmRhdGEudHJhbnNsYXRlZCArICc8L3A+Jyk7XG4gICAgLy8gICAgICAgICAvLyAgICAgbWZwUmVzcG9uc2UuZGF0YSA9ICQoJyN0cmFuc2xhdGUtcG9wdXAtd3JhcHBlcicpLmh0bWwoKTsgICAgICAgICAgICAgICAgXG4gICAgLy8gICAgICAgICAvLyB9LFxuICAgIC8vICAgICAgICAgLy8gYWpheENvbnRlbnRBZGRlZDogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgICAgICAvLyAgICAgLy8gQWpheCBjb250ZW50IGlzIGxvYWRlZCBhbmQgYXBwZW5kZWQgdG8gRE9NXG4gICAgLy8gICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnRlbnQpO1xuICAgIC8vICAgICAgICAgLy8gfVxuICAgIC8vICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICAgICAgICQuYWpheCh7XG4gICAgLy8gICAgICAgICAgICAgICAgIHVybDogXCIvYXBpL3RyYW5zbGF0ZS9lbi12aVwiLFxuICAgIC8vICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIC8vICAgICAgICAgICAgICAgICBkYXRhOiB7IHRleHQ6ICQoJyN0cmFuc2xhdGUtdGV4dCcpLmRhdGEoJ3RleHQnKSB9LFxuICAgIC8vICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PSB0cnVlKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0cmFuc2xhdGVQb3B1cCA9ICQoJyN0cmFuc2xhdGUtcG9wdXAtd3JhcHBlcicpO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICR0cmFuc2xhdGVQb3B1cC5maW5kKCcuY29udGVudCcpLmh0bWwoJzxwPicgKyBkYXRhLnRyYW5zbGF0ZWQgKyAnPC9wPicpO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5odG1sKCQoJyN0cmFuc2xhdGUtcG9wdXAtd3JhcHBlcicpLmh0bWwoKSk7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH0pXG59XG5cbmZ1bmN0aW9uIHNob3dUcmFuc2xhdGVCdXR0b24odHJhbnNsYXRlQnV0dG9uUG9zaXRpb24pIHtcbiAgICB2YXIgJHRyYW5zbGF0ZVRleHQgPSAkKCcjdHJhbnNsYXRlLXRleHQnKTtcbiAgICB2YXIgdGV4dCA9ICcnO1xuICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgIHRleHQgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICB0ZXh0ID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDtcbiAgICB9XG5cbiAgICBpZiAodGV4dCAhPSAnJykge1xuICAgICAgICAkdHJhbnNsYXRlVGV4dC5kYXRhKCd0ZXh0JywgdGV4dCk7ICAgICAgICBcbiAgICAgICAgaWYodHlwZW9mIHRyYW5zbGF0ZUJ1dHRvblBvc2l0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgJHRyYW5zbGF0ZVRleHQuY3NzKHsndG9wJzogdHJhbnNsYXRlQnV0dG9uUG9zaXRpb259KTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgICAgICR0cmFuc2xhdGVUZXh0LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkdHJhbnNsYXRlVGV4dC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7ICAgICAgICBcbiAgICB9XG59XG5cbnZhciBhcHAgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFkZXIuaW5pdCgpO1xuICAgICAgICBsb2FkSmF2YXNjcmlwdEZvclBhZ2UoKTtcbiAgICAgICAgbG9va3VwSGlnaGxpZ2h0VGV4dCgpO1xuICAgIH1cbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhamF4c3BpbmVyID0gcmVxdWlyZSgnLi9hamF4c3BpbmVyJyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxuICAgIGFqYXggPSB7fTtcblxuLy8gZnVuY3Rpb24gYWRkQWNjZXNzVG9rZW5Ub0FqYXhIZWFkZXIoc2VsZiwgeGhyKSB7XG4vLyAgICAgaWYgKHdpbmRvdy51c2VyLnVzZXJJZCAhPT0gMCkge1xuLy8gICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4gPT09ICd1bmRlZmluZWQnKSB7XG4vLyAgICAgICAgICAgICBzZWxmLmdldEFjY2Vzc1Rva2VuKCk7XG4vLyAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4gPT09ICd1bmRlZmluZWQnKSB7XG4vLyAgICAgICAgICAgICAgICAgeGhyLmFib3J0KCk7XG4vLyAgICAgICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHdpbmRvdy5leHBhdC5hY2Nlc3NfdG9rZW4pO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgd2luZG93LmV4cGF0LmFjY2Vzc190b2tlbik7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyB9XG5cbmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykgeyAgICBcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGFqYXhTcGlubmVySW5zdGFuY2U7XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7ICAgIFxuXG4gICAgJC5hamF4KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgIC8vIGlmIChvcHRzLmlzRGlzcGxheVNwaW5uZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyAgICAgYWpheFNwaW5uZXJJbnN0YW5jZSA9IG5ldyBBamF4U3Bpbm5lcihvcHRzLnNwaW5uZXJTaXplLCBvcHRzLnNwaW5uZXJDb250YWluZXIsIG9wdHMuaXNTcGlubmVyTG9hZGluZ1RleHQsIG9wdHMuaXNPdmVybGF5RGl2KTtcbiAgICAgICAgICAgIC8vICAgICBhamF4U3Bpbm5lckluc3RhbmNlLnN0YXJ0U3Bpbm5lcigpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAvL2FkZEFjY2Vzc1Rva2VuVG9BamF4SGVhZGVyKHNlbGYsIHhocik7XG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gaWYgKG9wdHMuaXNEaXNwbGF5U3Bpbm5lciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gICAgIGFqYXhTcGlubmVySW5zdGFuY2Uuc3RvcFNwaW5uZXIoKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5cbi8vIGFqYXguZGVsZXRlID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykgeyAgICBcbi8vICAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4vLyAgICAgdmFyIGFqYXhTcGlubmVySW5zdGFuY2U7XG4vLyAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gICAgXG4vLyAgICAgJC5hamF4KHtcbi8vICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbi8vICAgICAgICAgdXJsOiB1cmwsXG4vLyAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4vLyAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbi8vICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSAndW5kZWZpbmVkJyB8fCBvcHRzLmlzRGlzcGxheVNwaW5uZXIgPT09IHRydWUpIHtcbi8vICAgICAgICAgICAgICAgICBhamF4U3Bpbm5lckluc3RhbmNlID0gbmV3IEFqYXhTcGlubmVyKG9wdHMuc3Bpbm5lclNpemUsIG9wdHMuc3Bpbm5lckNvbnRhaW5lciwgb3B0cy5pc1NwaW5uZXJMb2FkaW5nVGV4dCwgb3B0cy5pc092ZXJsYXlEaXYpO1xuLy8gICAgICAgICAgICAgICAgIGFqYXhTcGlubmVySW5zdGFuY2Uuc3RhcnRTcGlubmVyKCk7XG4vLyAgICAgICAgICAgICB9XG5cbi8vICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignL2FwaS8nKSAhPT0gLTEpIHtcbi8vICAgICAgICAgICAgICAgICBhZGRBY2Nlc3NUb2tlblRvQWpheEhlYWRlcihzZWxmLCB4aHIpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9LFxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuLy8gICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuLy8gICAgICAgICAgICAgd2luZG93LmV4cGF0LmFjY2Vzc190b2tlbiA9IHVuZGVmaW5lZDtcbi8vICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gJ3VuZGVmaW5lZCcgfHwgb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSB0cnVlKSB7XG4vLyAgICAgICAgICAgICAgICAgYWpheFNwaW5uZXJJbnN0YW5jZS5zdG9wU3Bpbm5lcigpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG5cbi8vICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuLy8gfTtcblxuLy8gLypcbi8vICAqIC0gdXJsIDogYXBpIHVybFxuLy8gICogLSBvcHRpb25zXG4vLyAgKiAgKyBzcGlubmVyU2l6ZSA6IHNwaW5uZXIgc2l6ZSAoc21hbGwsIG1lZGl1bSwgbGFyZ2UpLCBkZWZhdWx0IGlzIGxhcmdlXG4vLyAgKiAgKyBzcGlubmVyQ29udGFpbmVyIDogY29udGFpbmVyIHRvIGFwcGVuZCBzcGlubmVyIGFuZCBvdmVybGF5LCBkZWZhdWx0IGlzIGJvZHlcbi8vICAqICArIHNwaW5uZXJDb250YWluZXIgOiBCeSBkZWZhdWx0LCBzcGlubmVyIGlzIHNob3dlZC4gU2V0IHZhbHVlIHRvIGZhbHNlIHRvIGhpZGUgc3Bpbm5lclxuLy8gICogICsgaXNTcGlubmVyTG9hZGluZ1RleHQgOiB1c2VkIHRvIGFkZCBcIkxvYWRpbmcgLi4uXCIgdGV4dCB1bmRlciBzcGlubmVyIGljb25cbi8vICAqICArIGlzT3ZlcmxheURpdiA6IGZvciBkaXNwbGF5IG92ZXJsYXkgZGl2LCBkZWZhdWx0IGlzIHRydWVcbi8vICAqIC0gcG9zdERhdGEgOiBhcGkgcG9zdCBkYXRhXG4vLyAgKi9cbi8vIEJhc2VDbGFzcy5wcm90b3R5cGUuc2VuZFBvc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zLCBwb3N0RGF0YSkge1xuLy8gICAgIHZhciBzZWxmID0gdGhpcztcbi8vICAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4vLyAgICAgdmFyIGFqYXhTcGlubmVySW5zdGFuY2U7XG4vLyAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XG4vLyAgICAgcG9zdERhdGEgPSAkLmV4dGVuZCh7IExvZ2luVXNlcklkOiBleHBhdC51c2VyLnVzZXJJZCB9LCBwb3N0RGF0YSk7XG5cbi8vICAgICB2YXIgY29udGVudFR5cGUgPSB0eXBlb2Ygb3B0cy5jb250ZW50VHlwZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCc7XG4vLyAgICAgaWYgKG9wdHMuaXNTdHJpbmdpZnkpIHtcbi8vICAgICAgICAgcG9zdERhdGEgPSBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSk7XG4vLyAgICAgfVxuXG4vLyAgICAgaWYgKHVybC5pbmRleE9mKCcvYXBpLycpICE9PSAtMSkge1xuLy8gICAgICAgICBjb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbi8vICAgICAgICAgcG9zdERhdGEgPSBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSk7XG4vLyAgICAgfVxuLy8gICAgIHZhciBhamF4T3B0aW9ucyA9IHtcbi8vICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4vLyAgICAgICAgIHVybDogdXJsLFxuLy8gICAgICAgICBkYXRhOiBwb3N0RGF0YSxcbi8vICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuLy8gICAgICAgICAvL2RhdGFUeXBlOiAnanNvbicsXG4vLyAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbi8vICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSAndW5kZWZpbmVkJyB8fCBvcHRzLmlzRGlzcGxheVNwaW5uZXIgPT09IHRydWUpIHtcbi8vICAgICAgICAgICAgICAgICBhamF4U3Bpbm5lckluc3RhbmNlID0gbmV3IEFqYXhTcGlubmVyKG9wdHMuc3Bpbm5lclNpemUsIG9wdHMuc3Bpbm5lckNvbnRhaW5lciwgb3B0cy5pc1NwaW5uZXJMb2FkaW5nVGV4dCwgb3B0cy5pc092ZXJsYXlEaXYpO1xuLy8gICAgICAgICAgICAgICAgIGFqYXhTcGlubmVySW5zdGFuY2Uuc3RhcnRTcGlubmVyKCk7XG4vLyAgICAgICAgICAgICB9XG5cbi8vICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignL2FwaS8nKSAhPT0gLTEpIHtcbi8vICAgICAgICAgICAgICAgICBhZGRBY2Nlc3NUb2tlblRvQWpheEhlYWRlcihzZWxmLCB4aHIpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9LFxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuLy8gICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuLy8gICAgICAgICAgICAgd2luZG93LmV4cGF0LmFjY2Vzc190b2tlbiA9IHVuZGVmaW5lZDtcbi8vICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuaXNEaXNwbGF5U3Bpbm5lciA9PT0gJ3VuZGVmaW5lZCcgfHwgb3B0cy5pc0Rpc3BsYXlTcGlubmVyID09PSB0cnVlKSB7XG4vLyAgICAgICAgICAgICAgICAgYWpheFNwaW5uZXJJbnN0YW5jZS5zdG9wU3Bpbm5lcigpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfTtcblxuLy8gICAgICQuYWpheChhamF4T3B0aW9ucyk7XG5cbi8vICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuLy8gfTtcblxuLy8gLypcbi8vICAqIC0gdXJsIDoganF1ZXJ5IHRlbXBsYXRlIHVybFxuLy8gICogLSB0bXBsSWQgOiB0ZW1wbGF0ZSBpZFxuLy8gICogLSB0bXBsRGF0YSA6IGRhdGEgdG8gYmluZCBpbnRvIHRlbXBsYXRlXG4vLyAgKi9cbi8vIEJhc2VDbGFzcy5wcm90b3R5cGUuZ2VuZXJhdGVUbXBsID0gZnVuY3Rpb24gKHVybCwgdG1wbElkLCB0bXBsRGF0YSkge1xuLy8gICAgIHZhciBiYXNlQ2xhc3MgPSB0aGlzO1xuLy8gICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuLy8gICAgIHZhciAkdG1wbElkID0gJCh0bXBsSWQpO1xuLy8gICAgIGlmICgkdG1wbElkLmxlbmd0aCkge1xuLy8gICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJpbmRUbXBsKCR0bXBsSWQsIHRtcGxEYXRhKSk7XG4vLyAgICAgfVxuLy8gICAgIGVsc2Uge1xuLy8gICAgICAgICBiYXNlQ2xhc3Muc2VuZEdldCh1cmwsIHsgaXNEaXNwbGF5U3Bpbm5lcjogZmFsc2UgfSkuZG9uZShmdW5jdGlvbiAodGVtcGxhdGUpIHtcbi8vICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQodGVtcGxhdGUpO1xuLy8gICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShiaW5kVG1wbCgkKHRtcGxJZCksIHRtcGxEYXRhKSk7XG4vLyAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGVycm9yKSB7XG4vLyAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG5cbi8vICAgICByZXR1cm4gZGVmZXJyZWQ7XG4vLyB9O1xuXG4vLyAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIC8vIFByaXZhdGUgZnVuY3Rpb25zXG5cbi8vIGZ1bmN0aW9uIGJpbmRUbXBsKCR0bXBsSWQsIHRtcGxEYXRhKSB7XG4vLyAgICAgJC50ZW1wbGF0ZSgkdG1wbElkLmF0dHIoJ2lkJyksICR0bXBsSWQpO1xuLy8gICAgIGlmICh0eXBlb2YgdG1wbERhdGEgIT09ICd1bmRlZmluZWQnKSB7XG4vLyAgICAgICAgIHJldHVybiAkLnRtcGwoJHRtcGxJZC5hdHRyKCdpZCcpLCB0bXBsRGF0YSk7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiAkLnRtcGwoJHRtcGxJZC5hdHRyKCdpZCcpKTtcbi8vIH1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGFqYXg7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWpheHNwaW5lciA9IHt9LFxuICAgIHNwaW5uZXIsXG4gICAgc3Bpbm5lckNvbnRhaW5lcixcbiAgICBkZWZhdWx0T3B0cyA9IHtcbiAgICAgICAgbGluZXM6IDExLCAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcbiAgICAgICAgbGVuZ3RoOiAxNSwgLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcbiAgICAgICAgd2lkdGg6IDYsIC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuICAgICAgICByYWRpdXM6IDE1LCAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcbiAgICAgICAgc2NhbGU6IDEsIC8vIFNjYWxlcyBvdmVyYWxsIHNpemUgb2YgdGhlIHNwaW5uZXJcbiAgICAgICAgY29ybmVyczogMC44LCAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuICAgICAgICBjb2xvcjogJyMwMEMzRkYnLCAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXG4gICAgICAgIG9wYWNpdHk6IDAuMTUsIC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXG4gICAgICAgIHJvdGF0ZTogMCwgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuICAgICAgICBkaXJlY3Rpb246IDEsIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcbiAgICAgICAgc3BlZWQ6IDEsIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG4gICAgICAgIHRyYWlsOiA2MCwgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcbiAgICAgICAgZnBzOiAyMCwgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXG4gICAgICAgIHpJbmRleDogMmU5LCAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcbiAgICAgICAgY2xhc3NOYW1lOiAnc3Bpbm5lcicsIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG4gICAgICAgIHRvcDogJzUwJScsIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAgICAgbGVmdDogJzUwJScsIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG4gICAgICAgIHNoYWRvdzogZmFsc2UsIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG4gICAgICAgIGh3YWNjZWw6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuICAgIH07XG5cbmFqYXhzcGluZXIuc3RhcnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHNwaW5uZXJDb250YWluZXIgPSBvcHRpb25zLnNwaW5uZXJDb250YWluZXIgfHwgJ2JvZHknO1xuICAgIHZhciBzcGlubmVyU2l6ZSA9IG9wdGlvbnMuc3Bpbm5lclNpemUgfHwgJ2xhcmdlJyxcbiAgICAgICAgaXNTcGlubmVyTG9hZGluZ1RleHQgPSBvcHRpb25zLmlzU3Bpbm5lckxvYWRpbmdUZXh0IHx8IGZhbHNlLFxuICAgICAgICBpc092ZXJsYXlEaXYgPSB0eXBlb2Ygb3B0aW9ucy5pc092ZXJsYXlEaXYgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pc092ZXJsYXlEaXYgOiB0cnVlLFxuICAgICAgICBvcHRzO1xuXG4gICAgc3dpdGNoIChzcGlubmVyU2l6ZSkge1xuICAgICAgICBjYXNlICdzbWFsbCc6XG4gICAgICAgICAgICBvcHRzID0gJC5leHRlbmQoZGVmYXVsdE9wdHMsIHsgbGluZXM6IDExLCBsZW5ndGg6IDgsIHdpZHRoOiAzLCByYWRpdXM6IDYgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZChkZWZhdWx0T3B0cywgeyBsaW5lczogMTEsIGxlbmd0aDogMTAsIHdpZHRoOiA1LCByYWRpdXM6IDExIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vbGFyZ2Ugc2l6ZSBmb3IgcGFnZVxuICAgICAgICAgICAgb3B0cyA9IGRlZmF1bHRPcHRzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vdmFyIGJhc2VDbGFzcyA9IHRoaXM7XG4gICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3Bpbm5lckNvbnRhaW5lcik7XG5cbiAgICAvL2NoZWNrIGFuZCBhZGQgXCJwb3NpdGlvbjogcmVsYXRpdmVcIiBmb3Igc3Bpbm5lciBjb250YWluZXJcbiAgICBpZiAodGFyZ2V0LnN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnIHx8IHRhcmdldC5zdHlsZS5wb3NpdGlvbiAhPT0gJ3JlbGF0aXZlJykge1xuICAgICAgICB0YXJnZXQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cblxuICAgIC8vYWRkIGFqYXggb3ZlcmxheSBkaXZcbiAgICBpZiAoaXNPdmVybGF5RGl2ICE9PSBmYWxzZSkge1xuICAgICAgICB2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5RGl2LmNsYXNzTGlzdC5hZGQoJ2FqYXgtb3ZlcmxheScpO1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQob3ZlcmxheURpdik7XG4gICAgfVxuXG4gICAgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcbiAgICBpZiAodHlwZW9mIGlzU3Bpbm5lckxvYWRpbmdUZXh0ICE9PSAndW5kZWZpbmVkJyAmJiBpc1NwaW5uZXJMb2FkaW5nVGV4dCA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgc3Bpbm5lckxvYWRpbmdUZXh0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciB0ZXh0Tm90ZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdMb2FkaW5nIG1vcmUgLi4uJyk7XG4gICAgICAgIHNwaW5uZXJMb2FkaW5nVGV4dERpdi5hcHBlbmRDaGlsZCh0ZXh0Tm90ZSk7XG4gICAgICAgIHNwaW5uZXJMb2FkaW5nVGV4dERpdi5jbGFzc0xpc3QuYWRkKCdzcGlubmVyTG9hZGluZ1RleHQnKTsgICAgICAgIFxuICAgICAgICBzcGlubmVyTG9hZGluZ1RleHREaXYuY2xhc3NMaXN0LmFkZChzcGlubmVyU2l6ZSk7XG4gICAgICAgIHNwaW5uZXIuZWwuYXBwZW5kQ2hpbGQoc3Bpbm5lckxvYWRpbmdUZXh0RGl2KTtcbiAgICB9XG59O1xuXG5hamF4c3BpbmVyLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgc3Bpbm5lci5zdG9wKCk7XG4gICAgJChzcGlubmVyQ29udGFpbmVyKS5maW5kKCcuYWpheC1vdmVybGF5JykucmVtb3ZlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFqYXhzcGluZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWpheHNwaW5lciA9IHJlcXVpcmUoJy4vYWpheHNwaW5lcicpO1xuXG5mdW5jdGlvbiBpc01vYmlsZSgpIHtcbiAgICB2YXIgbW9iaWxlQWdlbnRIYXNoID0gWydtb2JpbGUnLCAndGFibGV0JywgJ3Bob25lJywgJ2lwYWQnLCAnaXBvZCcsICdhbmRyb2lkJywgJ2JsYWNrYmVycnknLCAnd2luZG93cyBjZScsICdvcGVyYSBtaW5pJywgJ3BhbG0nXTtcbiAgICB2YXIgICAgaWR4ID0gMDtcbiAgICB2YXIgaXNNb2JpbGUgPSBmYWxzZTtcbiAgICB2YXIgdXNlckFnZW50ID0gKG5hdmlnYXRvci51c2VyQWdlbnQpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICB3aGlsZSAobW9iaWxlQWdlbnRIYXNoW2lkeF0gJiYgIWlzTW9iaWxlKSB7XG4gICAgICAgIGlzTW9iaWxlID0gKHVzZXJBZ2VudC5pbmRleE9mKG1vYmlsZUFnZW50SGFzaFtpZHhdKSA+PSAwKTtcbiAgICAgICAgaWR4Kys7XG4gICAgfVxuICAgIHJldHVybiBpc01vYmlsZTtcbn1cblxuZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICAgIGlmKHR5cGVvZiB1c2VySWQgIT09ICd1bmRlZmluZWQnICYmIHVzZXJJZCAhPT0gJycpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb3BlbkFqYXhQb3B1cCh1cmwsIHBvcHVwU2VsZWN0b3IpIHsgICAgXG4gICAgJC5tYWduaWZpY1BvcHVwLm9wZW4oe1xuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgc3JjOiBwb3B1cFNlbGVjdG9yXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWpheHNwaW5lci5zdGFydCh7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXJDb250YWluZXI6IHBvcHVwU2VsZWN0b3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG52YXIgdXRpbCA9IHtcbiAgICBpc01vYmlsZTogaXNNb2JpbGUsXG4gICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgb3BlbkFqYXhQb3B1cDogb3BlbkFqYXhQb3B1cFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB1dGlsOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHNlYXJjaCA9IHJlcXVpcmUoJy4vc2VhcmNoJyk7XG5cbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XG4gICAgJCgnLnRvZ2dsZS1tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ21vYmlsZS1tZW51Jyk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0b2dnbGVNZW51KCk7XG4gICAgc2VhcmNoLmluaXQoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5pdDogaW5pdFxufSIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3V0aWwnKTtcblxuZnVuY3Rpb24gaW5pdHBhZ2UoKSB7XG4gICAgLy9iaW5kIHNlYXJjaCBpbnB1dFxuICAgIHZhciBzZWFyY2hUeXBlID0gJCgnI2hkZlR5cGUnKS52YWwoKTtcbiAgICB2YXIgJHdvcmRJbnB1dCA9ICQoJyN3b3JkJyk7XG4gICAgaWYoc2VhcmNoVHlwZSA9PT0gJ2VuLXZpJykgeyAvL2VuLXZpXG4gICAgICAgICR3b3JkSW5wdXQuYXR0cigncGxhY2Vob2xkZXInLCAnRW5nbGlzaCAtIFZpZXRuYW1lc2UnKTtcbiAgICB9IGVsc2UgaWYoc2VhcmNoVHlwZSA9PT0gJ2VuLWVuJykgeyAvL2VuLWVuXG4gICAgICAgICR3b3JkSW5wdXQuYXR0cigncGxhY2Vob2xkZXInLCAnRW5nbGlzaCAtIEVuZ2xpc2gnKTtcbiAgICB9IGVsc2UgaWYoc2VhcmNoVHlwZSA9PT0gJ3ZpLWVuJykgeyAvL3ZpLWVuXG4gICAgICAgICR3b3JkSW5wdXQuYXR0cigncGxhY2Vob2xkZXInLCAnVmlldG5hbWVzZSAtIEVuZ2xpc2gnKTtcbiAgICB9XG5cbiAgICAvL2JpbmQgZGF0YSBmb3IgZGljdCB0eXBlXG4gICAgJCgnLmRpY3QtdHlwZSBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcuZGljdC10eXBlJykuZmluZCgnbGlbZGF0YS10eXBlPVwiJyArIHNlYXJjaFR5cGUgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hBdXRvY29tcGxldGUoKSB7XG4gICAgJChcIiN3b3JkXCIpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKGUpIHsgICAgICAgIFxuICAgICAgICBjb25zb2xlLnRpbWUoJ2F1dG9jb21wbGV0ZScpOyAgICBcbiAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHdvcmQgPSAkc2VsZi52YWwoKS50cmltKCk7XG4gICAgICAgICRzZWxmLmRhdGEoJ3dvcmQnLCB3b3JkKTtcbiAgICAgICAgaWYod29yZC5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAvLyQoJyNidG4tY2xlYXJpbnB1dCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGJpbmRBdXRvQ29tcGxldGUobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8kKCcjYnRuLWNsZWFyaW5wdXQnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgdmFyIHBhZ2VzaXplID0gNSwgd1dpZHRoID0gJCh3aW5kb3cpLm91dGVyV2lkdGgoKTtcbiAgICAgICAgaWYod1dpZHRoID49IDc2OCAmJiB3V2lkdGggPCAxMDI0KSB7XG4gICAgICAgICAgICBwYWdlc2l6ZSA9IDg7XG4gICAgICAgIH0gZWxzZSBpZiAod1dpZHRoID49IDEwMjQpIHtcbiAgICAgICAgICAgIHBhZ2VzaXplID0gMjA7XG4gICAgICAgIH1cblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnL2FwaS9hdXRvY29tcGxldGUvd29yZC8nICsgJCgnI2hkZlR5cGUnKS52YWwoKSArICcvJyArIHBhZ2VzaXplICsgJy8nICsgJCh0aGlzKS52YWwoKS50cmltKCksICAgICAgICAgICAgICBcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGJpbmRBdXRvQ29tcGxldGUoZGF0YSk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCgnYXV0b2NvbXBsZXRlJyk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgICAgIFxuICAgIH0pOyBcblxuICAgICQoJyNidG4tY2xlYXJpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zb2xlLmxvZygnYXNkc2EnKTtcbiAgICB9KTtcbn1cblxuLy9wcml2YXRlIGZ1bmN0aW9uXG5mdW5jdGlvbiBiaW5kQXV0b0NvbXBsZXRlKGRhdGEpIHtcbiAgICB2YXIgJHNlYXJjaFN1Z2dlc3Rpb24gPSAkKCcjc2VhcmNoLXN1Z2dlc3Rpb24nKTsgICAgXG4gICAgJHNlYXJjaFN1Z2dlc3Rpb24uZW1wdHkoKTsgXG5cbiAgICBpZihkYXRhID09IG51bGwgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJHNlYXJjaFN1Z2dlc3Rpb24udHJpZ2dlcignaGlkZScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRtcGxTZWFyY2hTdWdnZXN0aW9uID0gXG4gICAgJzx1bD4nICtcbiAgICAgICAgJ3t7ZWFjaCB3b3Jkc319JyArXG4gICAgICAgICAgICAnPGxpPicgK1xuICAgICAgICAgICAgICAgICc8YSBjbGFzcz1cImF1dG9zZWFyY2gtaXRlbVwiIGhyZWY9XCIvZGVmaW5pdGlvbi8nICsgJCgnI2hkZlR5cGUnKS52YWwoKSArICcvJHtuYW1lfVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ3b3JkLW5hbWVcIj48c3BhbiBjbGFzcz1cIm5hbWVcIj4ke25hbWV9PC9zcGFuPiA8c3BhbiBjbGFzcz1cInBob25ldGljLXNwZWxsaW5nXCI+JHtwaG9uZXRpY1NwZWxsaW5nfTwvc3Bhbj48L3A+JyArXG4gICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cIndvcmQtbWVhblwiPnt7aWYgbWFpblR5cGV9fTxzcGFuIGNsYXNzPVwibWFpbi10eXBlXCI+WyR7bWFpblR5cGV9XTwvc3Bhbj57ey9pZn19IHt7aWYgbWFpblZpTWVhbn19e3todG1sIG1haW5WaU1lYW59fXt7ZWxzZX19e3todG1sIG1haW5Fbk1lYW59fXt7L2lmfX08L3A+JyArXG4gICAgICAgICAgICAgICAgJzwvYT4nICsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAnPC9saT4nICtcbiAgICAgICAgJ3t7L2VhY2h9fScgK1xuICAgICc8L3VsPic7ICAgIFxuICAgICQudG1wbCh0bXBsU2VhcmNoU3VnZ2VzdGlvbiwge3dvcmRzOiBkYXRhfSkuYXBwZW5kVG8oJyNzZWFyY2gtc3VnZ2VzdGlvbicpO1xuICAgICRzZWFyY2hTdWdnZXN0aW9uLnRyaWdnZXIoJ3Nob3cnKTtcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHtcbiAgICAkKCcuZnJtU2VhcmNoJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8kKCcjd29yZCcpLmF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZGVmaW5pdGlvbi8nICsgJCgnI2hkZlR5cGUnKS52YWwoKSArICcvJyArICQoJyN3b3JkJykudmFsKCkudHJpbSgpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZVNlYXJjaFN1Z2dlc3Rpb24oKSB7XG4gICAgJCgnI3NlYXJjaC1zdWdnZXN0aW9uJykub24oJ3Nob3cnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgICAgICAgIFxuICAgICAgICAkKHRoaXMpLnNsaWRlRG93bigpO1xuICAgICAgICAkKCcuc2VhcmNoLXNlY3Rpb24nKS5jc3Moeydwb3NpdGlvbic6ICdhYnNvbHV0ZSd9KTtcbiAgICB9KTtcblxuICAgICQoJyNzZWFyY2gtc3VnZ2VzdGlvbicpLm9uKCdoaWRlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAkKCcuc2VhcmNoLXNlY3Rpb24nKS5jc3Moeydwb3NpdGlvbic6ICdmaXhlZCd9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0U2VhcmNoVHlwZSgpIHtcbiAgICB2YXIgJHNlbGVjdFR5cGVDb250ZW50ID0gJCgnLnNlbGVjdC10eXBlcy1jb250ZW50Jyk7XG4gICAgJCgnLnNlbGVjdC1pY29ucycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnI3NlYXJjaC1zdWdnZXN0aW9uJykudHJpZ2dlcignaGlkZScpO1xuICAgICAgICAkc2VsZWN0VHlwZUNvbnRlbnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOyAgICAgICAgXG4gICAgfSk7XG4gICAgXG4gICAgJHNlbGVjdFR5cGVDb250ZW50Lm9uKCdjbGljaycsICdsaScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAkc2VsZWN0VHlwZUNvbnRlbnQuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICRzZWxmLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJHNlbGVjdFR5cGVDb250ZW50LmZpbmQoJyNoZGZUeXBlJykudmFsKCRzZWxmLmRhdGEoJ3R5cGUnKSk7XG4gICAgICAgICRzZWxlY3RUeXBlQ29udGVudC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5zZWxlY3QtaWNvbnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJyN3b3JkJykuYXR0cigncGxhY2Vob2xkZXInLCAkc2VsZi50ZXh0KCkpLnZhbCgnJykuZGF0YSgnd29yZCcsICcnKS5mb2N1cygpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGlja09uV2luZG93KCkgeyAgXG4gICAgaWYoL2lQL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICAkKCcqOm5vdChcImFcIiknKS5jc3MoJ2N1cnNvcicsICdwb2ludGVyJyk7XG4gICAgfTtcbiAgICBcbiAgICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnI3NlYXJjaC1zdWdnZXN0aW9uJykudHJpZ2dlcignaGlkZScpO1xuICAgICAgICAkKCcuc2VsZWN0LXR5cGVzLWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5zZWxlY3QtaWNvbnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUtleURvd24oKSB7XG4gICAgaWYodXRpbC5pc01vYmlsZSgpKSB7IFxuICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlS2V5RG93biA6IGlzTW9iaWxlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdmFyICRzZWFyY2hTdWdnZXN0aW9uID0gJCgnI3NlYXJjaC1zdWdnZXN0aW9uJyk7XG4gICAgdmFyICRpbnV0V29yZCA9ICQoJyN3b3JkJyk7ICAgIFxuICAgICRpbnV0V29yZC5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgaWYoJHNlYXJjaFN1Z2dlc3Rpb24uY3NzKCdkaXNwbGF5JykgPT09ICdub25lJykgcmV0dXJuOyAgICAgICAgXG5cbiAgICAgICAgdmFyIG9yaWdpbklucHV0VmFsdWUgPSAkaW51dFdvcmQuZGF0YSgnd29yZCcpO1xuXG4gICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMjcpIHsgLy9lc2MgXG4gICAgICAgICAgICAgJHNlYXJjaFN1Z2dlc3Rpb24uaGlkZSgpLmVtcHR5KCk7XG4gICAgICAgICAgICAgJGludXRXb3JkLnZhbChvcmlnaW5JbnB1dFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYoZS5rZXlDb2RlID09PSAzOCkgeyAvL3VwXG4gICAgICAgICAgICB2YXIgJHByZXYgPSAkc2VhcmNoU3VnZ2VzdGlvbi5maW5kKCdsaS5hY3RpdmUnKS5wcmV2KCk7XG4gICAgICAgICAgICAkc2VhcmNoU3VnZ2VzdGlvbi5maW5kKCdsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBpZigkcHJldi5sZW5ndGggPiAwKSB7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICRwcmV2LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkaW51dFdvcmQudmFsKCRwcmV2LmZpbmQoJy5uYW1lJykudGV4dCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGludXRXb3JkLnZhbChvcmlnaW5JbnB1dFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmKGUua2V5Q29kZSA9PT0gNDApIHsgLy9kb3duXG4gICAgICAgICAgICBpZigkc2VhcmNoU3VnZ2VzdGlvbi5maW5kKCdsaS5hY3RpdmUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICRzZWFyY2hTdWdnZXN0aW9uLmZpbmQoJ2xpOm5vdCg6bGFzdC1jaGlsZCkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoKS5hZGRDbGFzcygnYWN0aXZlJyk7ICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNlYXJjaFN1Z2dlc3Rpb24uZmluZCgnbGk6Zmlyc3QnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkaW51dFdvcmQudmFsKCRzZWFyY2hTdWdnZXN0aW9uLmZpbmQoJ2xpLmFjdGl2ZTpmaXJzdCcpLmZpbmQoJy5uYW1lJykudGV4dCgpKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGN1cnJlbnRJdGVtID0gJHNlYXJjaFN1Z2dlc3Rpb24uZmluZCgnbGkuYWN0aXZlOmZpcnN0Jyk7XG4gICAgICAgIGlmKCRjdXJyZW50SXRlbS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkc2VhcmNoU3VnZ2VzdGlvbi5zY3JvbGxUb3AoMCk7ICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2VhcmNoU3VnZ2VzdGlvbi5zY3JvbGxUb3AoKCRjdXJyZW50SXRlbS5wb3NpdGlvbigpLnRvcCAtICRzZWFyY2hTdWdnZXN0aW9uLmhlaWdodCgpKSArICRjdXJyZW50SXRlbS5oZWlnaHQoKSk7ICAgICAgICAgICAgXG4gICAgICAgIH0gICAgICAgIFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0KCkgeyAgICBcbiAgICAkKCcjaG9tZS1wYWdlICN3b3JkJykuZm9jdXMoKTtcbiAgICBpbml0cGFnZSgpO1xuICAgIHNlYXJjaEF1dG9jb21wbGV0ZSgpO1xuICAgIHN1Ym1pdEZvcm0oKTtcbiAgICBzZWxlY3RTZWFyY2hUeXBlKCk7XG4gICAgaGFuZGxlQ2xpY2tPbldpbmRvdygpOyAgICBcbiAgICBoYW5kbGVLZXlEb3duKCk7XG4gICAgc2hvd0hpZGVTZWFyY2hTdWdnZXN0aW9uKCk7XG4gICAgLy9pbnB1dEZvY3VzT3V0KCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGluaXQ6IGluaXRcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbCcpO1xuXG5mdW5jdGlvbiBoYW5kbGVXaW5kb3dTY3JvbGwoKSB7XG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgJHdpbmRvdy5zY3JvbGwoZnVuY3Rpb24oKSB7ICAgICAgICBcbiAgICAgICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgICAgIGlmKCR3aW5kb3cud2lkdGgoKSA8IDEwMjQgfHwgdXRpbC5pc01vYmlsZSgpKSByZXR1cm47XG5cbiAgICAgICAgaWYoJHdpbmRvdy5zY3JvbGxUb3AoKSA+PSAzMDApIHsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCcuc2VhcmNoLXNlY3Rpb24nKS5hZGRDbGFzcygnZml4LXRvcCcpLmNzcyh7J3otaW5kZXgnOiAnOTk5OTknfSk7XG4gICAgICAgICAgICAkKCcuYWJvdXQtc2VjdGlvbicpLmNzcyh7J21hcmdpbi10b3AnOiAnMzAwcHgnfSk7XG4gICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgJCgnLnNlYXJjaC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2ZpeC10b3AnKS5jc3Moeyd6LWluZGV4JzogJzEnfSk7ICAgICAgICAgICAgICBcbiAgICAgICAgICAgICQoJy5hYm91dC1zZWN0aW9uJykuY3NzKHsnbWFyZ2luLXRvcCc6ICcwcHgnfSk7XG4gICAgICAgIH0gIFxuICAgIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gICAgaGFuZGxlV2luZG93U2Nyb2xsKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGluaXQ6IGluaXRcbn0iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHJlc2V0Tm90aWNlKCkge1xuICAgIHZhciAkbm90aWNlID0gJCgnI25vdGljZScpO1xuICAgICRub3RpY2UuZmluZCgnLmNvcnJlY3QnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICRub3RpY2UuZmluZCgnLmluY29ycmVjdCcpLmFkZENsYXNzKCdoaWRlJykudGV4dCgnJyk7XG4gICAgJG5vdGljZS5maW5kKCcuYnRuLWlnbm9yZScpLnNob3coKTtcbiAgICAkKCcuYnRuLWNoZWNrJykudGV4dCgnQ2hlY2snKTtcbn1cblxuZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgdmFyIGFyclF1ZXN0aW9ucyA9ICQoJy5xdWVzdGlvbi1jb250YWluZXInKS50b0FycmF5KCksIHFJbmRleCA9IDE7XG4gICAgJCgnLmJ0bi1jaGVjaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgICRxdWVzdGlvbkNvbnRhaW5lciA9ICRzZWxmLnBhcmVudHMoJy5xdWVzdGlvbi1jb250YWluZXInKSwgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgJGhkZkFuc3dlciA9ICRxdWVzdGlvbkNvbnRhaW5lci5maW5kKCcuaGRmQW5zd2VyJyk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyclF1ZXN0aW9ucyk7XG5cbiAgICAgICAgaWYgKCRzZWxmLnRleHQoKSA9PT0gJ0NoZWNrJykge1xuICAgICAgICAgICAgdmFyIHVzZXJBbnN3ZXIgPSAnJztcbiAgICAgICAgICAgIC8vIGdldCB1c2VyQW5zd2VyXG4gICAgICAgICAgICBpZigkcXVlc3Rpb25Db250YWluZXIuZGF0YSgndHlwZScpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdXNlckFuc3dlciA9ICRxdWVzdGlvbkNvbnRhaW5lci5maW5kKCdpbnB1dFt0eXBlPXJhZGlvXTpjaGVja2VkJykudmFsKCkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigkcXVlc3Rpb25Db250YWluZXIuZGF0YSgndHlwZScpID09PSAyIHx8ICRxdWVzdGlvbkNvbnRhaW5lci5kYXRhKCd0eXBlJykgPT09IDMgfHwgJHF1ZXN0aW9uQ29udGFpbmVyLmRhdGEoJ3R5cGUnKSA9PT0gNCkge1xuICAgICAgICAgICAgICAgIHVzZXJBbnN3ZXIgPSAkcXVlc3Rpb25Db250YWluZXIuZmluZCgnLnR4dC1hbnN3ZXInKS52YWwoKS50cmltKCk7XG4gICAgICAgICAgICB9ICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIC8vIGFuc3dlclxuICAgICAgICAgICAgdmFyIGFuc3dlciA9ICRoZGZBbnN3ZXIudmFsKCkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh1c2VyQW5zd2VyID09PSBhbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICAkcXVlc3Rpb25Db250YWluZXIuYWRkQ2xhc3MoJ3Bhc3NlZCcpO1xuICAgICAgICAgICAgICAgICQoJyNub3RpY2UnKS5maW5kKCcuY29ycmVjdCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnI25vdGljZScpLmZpbmQoJy5pbmNvcnJlY3QnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJyNub3RpY2UnKS5maW5kKCcuYnRuLWlnbm9yZScpLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICQoJyNub3RpY2UnKS5maW5kKCcuY29ycmVjdCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnI25vdGljZScpLmZpbmQoJy5pbmNvcnJlY3QnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJyNub3RpY2UnKS5maW5kKCcuaW5jb3JyZWN0JykudGV4dCgnQ29ycmVjdCBpcyA6ICcgKyAkcXVlc3Rpb25Db250YWluZXIuZmluZCgnLmhkZkFuc3dlcicpLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAkKCcjbm90aWNlJykuZmluZCgnLmJ0bi1pZ25vcmUnKS5oaWRlKCk7XG4gICAgICAgICAgICB9ICAgICAgICAgIFxuXG4gICAgICAgICAgICAkc2VsZi50ZXh0KCdDb250aW51ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHF1ZXN0aW9uQ29udGFpbmVyLmZhZGVPdXQoNTAwLCBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlc2V0Tm90aWNlKCk7XG4gICAgICAgICAgICAgICAgaWYoYXJyUXVlc3Rpb25zLmxlbmd0aCA+IHFJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAkKGFyclF1ZXN0aW9uc1txSW5kZXhdKS5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgcUluZGV4Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoJCgnLnF1ZXN0aW9uLWNvbnRhaW5lcjpub3QoLnBhc3NlZCknKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJRdWVzdGlvbnMgPSAkKCcucXVlc3Rpb24tY29udGFpbmVyOm5vdCgucGFzc2VkKScpLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHFJbmRleCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnF1ZXN0aW9uLWNvbnRhaW5lcjpub3QoLnBhc3NlZCk6Zmlyc3QnKS5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNmaW5pc2gnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBwbGF5U291bmQoKSB7IFxuICAgICQoJy5zb3VuZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYXVkaW8gPSBuZXcgQXVkaW8oJCh0aGlzKS5kYXRhKCdzcmMnKSk7XG4gICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIGNoZWNrKCk7XG4gICAgcGxheVNvdW5kKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGluaXQ6IGluaXRcbn0iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vaGVscGVycy91dGlsJyksXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYWpheCcpO1xuXG5mdW5jdGlvbiBpbml0UGFnZSgpIHtcbiAgICB2YXIgJG1vcmVFeGFtcGxlcyA9ICQoJy5tb3JlLWV4YW1wbGVzJyk7XG4gICAgJG1vcmVFeGFtcGxlcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZigkKHRoaXMpLmZpbmQoJy5leCcpLmxlbmd0aCA9PT0gMCkgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gb3BlbkFkZFdvcmRQb3B1cCgpIHtcbiAgICAkKCcjYWRkVG9MaXN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKCF1dGlsLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAkLm1hZ25pZmljUG9wdXAub3Blbih7XG4gICAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3JjOiAnLmF1dGhlbi1wb3B1cCcgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJC5tYWduaWZpY1BvcHVwLm9wZW4oe1xuICAgICAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogJy5hZGQtdG8tbGlzdC1wb3B1cCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBhamF4LmdldCgnL2FwaS9saXN0cycpLmRvbmUoZnVuY3Rpb24obGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGlzdHMsIGZ1bmN0aW9uKGluZGV4LCBsaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgbGlzdC5faWQgKyAnXCI+JyArIGxpc3QudGl0bGUgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWxpc3QtcG9wdXAgI2xpc3QnKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdG8tbGlzdC1wb3B1cCAjbGlzdCcpLmFwcGVuZChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkV29yZFRvTGlzdCgpIHtcbiAgICB2YXIgJGFkZFRvTGlzdFBvcHVwID0gJCgnI2FkZC10by1saXN0LXBvcHVwJyk7XG4gICAgJGFkZFRvTGlzdFBvcHVwLm9uKCdjbGljaycsICdidXR0b24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB3b3JkOiAkYWRkVG9MaXN0UG9wdXAuZmluZCgnLmhlcm8tdGl0bGUnKS50ZXh0KCksXG4gICAgICAgICAgICB0cmFuc2xhdGVUb0VuOiAnJyxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVRvVmk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50X3NlbGVjdGFibGUnKS5vdXRlckhUTUwsXG4gICAgICAgICAgICBsaXN0SWQ6ICRhZGRUb0xpc3RQb3B1cC5maW5kKCcjbGlzdCcpLnZhbCgpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnL2FwaS93b3JkcycsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHNlbGVjdERpY3RUeXBlKCkge1xuICAgICQoJy5zZWxlY3QtZGljdC10eXBlIGxpLCAubWVudS1kaWN0LXR5cGUgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2RlZmluaXRpb24vJyArICQodGhpcykuZGF0YSgndHlwZScpICsgJy8nICsgJCgnLndvcmQtbmFtZScpLnRleHQoKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZXhwYW5kQ29sbGFwc2VUeXBlT2ZXb3JkKCkge1xuICAgICQoJy50eXBlLW9mLXdvcmQnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmwxLWdyb3VwJykuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnY29sbGFwc2VkJyk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZXhwYW5kQ29sbGFwc2VNb3JlRXhhbXBsZXMoKSB7XG4gICAgJCgnLmJ0bi1tb3JlLWV4ZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZXhnJykuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnY29sbGFwc2VkJyk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBpbml0UGFnZSgpO1xuICAgIHNlbGVjdERpY3RUeXBlKCk7XG4gICAgZXhwYW5kQ29sbGFwc2VUeXBlT2ZXb3JkKCk7XG4gICAgZXhwYW5kQ29sbGFwc2VNb3JlRXhhbXBsZXMoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5pdDogaW5pdFxufSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gc3VibWl0KCkge1xuICAgICQoJyNidG4tc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjcmF3bGVyJyk7XG4gICAgICAgIHZhciBwb3N0RGF0YSA9IHtcbiAgICAgICAgICAgIHVybDogJCgnI3VybCcpLnZhbCgpLFxuICAgICAgICAgICAgZnJvbWluZGV4OiAkKCcjZnJvbWluZGV4JykudmFsKCksXG4gICAgICAgICAgICB0b2luZGV4OiAkKCcjdG9pbmRleCcpLnZhbCgpXG4gICAgICAgIH07ICAgICAgICBcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnL2FwaS93b3JkY3Jhd2xlcicsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHBvc3REYXRhLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgJCgnI21zZycpLnRleHQocmVzdWx0KS5yZW1vdmVDbGFzcygnaGlkZScpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKCcjbXNnJykudGV4dChlcnJvcikucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7ICAgIFxufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHN1Ym1pdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBpbml0OiBpbml0XG59Il19"}